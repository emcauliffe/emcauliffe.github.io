<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>Short ISP: Nixie Tube Clock | Ethan McAuliffe's Blog</title>
	<meta name="description" content="PurposeThe purpose of this project is to create a clock that displays the current time, in a 24h format, on 4 nixie tubes. The clock is to show the accurate ...">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://emcauliffe.ca/Images/favicon.png" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/2017/02/04/Short-ISP-Nixie-Clock.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Ethan McAuliffe's Blog" href="/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-113342409-1', 'auto');
	ga('send', 'pageview');
	</script>
	
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-3976272342678634",
	    enable_page_level_ads: true
	  });
	</script>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#ffffff",
      "text": "#000000"
    },
    "button": {
      "background": "#1ABC9C",
      "text": "#ffffff"
    }
  },
  "theme": "edgeless"
})});
</script>

</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<h1 class="site-title">
			<a href="/">Ethan McAuliffe's Blog</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<li>
				<a class="page-link" href="/tags.html">
					tags
				</a>
			</li>
			
			
			<!-- Social icons from Font Awesome, if enabled  -->
			
<li>
	<a href="/feed.xml" title="Follow RSS feed">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>



<li>
	<a href="mailto:ethan@emcauliffe.ca" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/emcauliffe" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>







<li>
	<a href="https://www.linkedin.com/in/ethan-mcauliffe/" title="Follow on LinkedIn">
		<i class="fa fa-fw fa-linkedin"></i>
	</a>
</li>





















<li>
	<a href="https://www.youtube.com/user/ethanmrsgc" title="Follow on YouTube">
		<i class="fa fa-fw fa-youtube"></i>
	</a>
</li>



            <!-- Search bar -->
            
            <li>
            <form action="/search.html" method="get">
                <input type="text" id="search-box" name="query" placeholder="Search" class="">
                <button type="submit" class="">
                    <i class="fa fa-fw fa-search"></i>
                </button>
            </form>
            </li>
            
		</ul>
	</nav>

</header>

    <div class="content">
      <article class="feature-image">
  <!--<header style="background-image: url('/https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170203_181051.jpg')">-->
  <header style="background-image: url(https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170203_181051.jpg)">
    <h1 class="title">Short ISP: Nixie Tube Clock</h1>
    
    <p class="meta">
      February 4, 2017
      
    </p>
  </header>
  <section class="post-content"><h2 id="purpose">Purpose</h2>
<p>The purpose of this project is to create a clock that displays the current time, in a 24h format, on 4 nixie tubes. The clock is to show the accurate time, despite power loss, and have only one power supply.</p>

<table>
  <thead>
    <tr>
      <th>Parts List</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ATmega328P</td>
      <td>16MHz Crystal Oscillator</td>
    </tr>
    <tr>
      <td>2× 22pF Capacitor</td>
      <td>680pF Capacitor</td>
    </tr>
    <tr>
      <td>2× 1nF Capacitor</td>
      <td>10nF Capacitor</td>
    </tr>
    <tr>
      <td>2.2µF@250V Capacitor</td>
      <td>220µF Capacitor</td>
    </tr>
    <tr>
      <td>19× 10KΩ Resistor</td>
      <td>4× 47KΩ Resistor</td>
    </tr>
    <tr>
      <td>680KΩ Resistor</td>
      <td>1KΩ Resistor</td>
    </tr>
    <tr>
      <td>0.22Ω@2W Resistor</td>
      <td>4.3KΩ Resistor</td>
    </tr>
    <tr>
      <td>2.5KΩ Potentiometer</td>
      <td>1N4148 Diode</td>
    </tr>
    <tr>
      <td>MUR1100 Diode</td>
      <td>BC556 PNP Transistor</td>
    </tr>
    <tr>
      <td>IRF840 N-Channel MOSFET</td>
      <td>150µH@3A Inductor</td>
    </tr>
    <tr>
      <td>MC34063 Switching Regulator</td>
      <td>Chronodot I2C RTC</td>
    </tr>
    <tr>
      <td>2× SN74HC595 Shift Register</td>
      <td>4× K155ID1 BCD Converter</td>
    </tr>
    <tr>
      <td>4× IN-14 Nixie Tubes</td>
      <td>Slide Switch</td>
    </tr>
    <tr>
      <td>7805 5V Voltage Regulator</td>
      <td>DC Power Jack</td>
    </tr>
    <tr>
      <td>9V Power Supply</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="procedure">Procedure</h2>
<p>This ISP began as an idea while completing the 555 Boost converter circuit. Next, the idea developed a true project with the purchase of nixie tubes and BCD chips on eBay. The creation of a possible schematic occurred as the parts were in the mail. The schematic in question contained a boost converter circuit as well as the nixie tube and driver circuitry. The boost converter in the original circuit was not successful as the capacitors inside the MOSFET interfered with the PWM signal of the ATmega328P and fried it. Next was building a 555 boost converter, which increased voltage to desired levels, but could not sustain load. Instead, an eBay boost converter specifically designed for nixie tubes was purchased.</p>

<p>Code writing started as soon as the nixie tubes and BCD chips arrived. The programming of the chronodot started the adventure into coding a clock. First, the code calls the hex data for the current hour minute and second from the chronodot using the <code class="highlighter-rouge">Wire.read()</code> function.
The <code class="highlighter-rouge">readTime</code> function formats this data into a human-readable decimal value. Next, the decimal values get fed into the <code class="highlighter-rouge">timeData</code> function. This function takes the decimal values and, using the <code class="highlighter-rouge">toNibble</code> function, creates a 16 digit long string of 1s and 0s. Each digit in the string represents an output on the shift register and each group of 4 digits, or binary nibble, represents a digit on the clock. The <code class="highlighter-rouge">toNibble</code> function takes the binary value of a digit and creates a string exactly 4 digits long.</p>

<p>After formatting the current time in a way that the shift registers and BCD chips can read, the <code class="highlighter-rouge">shiftTime</code> function sends this data out. The <code class="highlighter-rouge">shiftTime</code> function runs through an entire string and sends the corresponding data to the shift registers.</p>

<p>Shift registers use 3 pins to receive information from a device like the ATMega 328P. These pins are the serial data, serial clock and latch pins. The shift register indexes a “1” in its memory when the serial data pin is high and, after that, the serial clock pin is high. If the serial data pin is low and the serial clock pin has been set to high, the shift register indexes a “0”. Finally, after receiving all the desired data, the latch pin is set high and the outputs of the shift register change to reflect the data received. The <code class="highlighter-rouge">shiftTime</code> function reads the string of 1s and 0s representing the current time and sends this data to the shift registers.</p>

<p><img style="float:right" src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170124_161046.jpg" /></p>

<p>These shift registers connect to К155ИД1 (K155ID1) binary to decimal converter chips. These chips take the binary nibble and ground the appropriate output pins. The pins ground incoming current because they are specially designed for ИН-14 (IN-14) nixie tubes, which have a common anode.</p>

<p>Nixie tubes work by lighting a filament inside a glass chamber filled with gas. This gas often consists of neon and some mercury or argon. They need 150V-170V to run and can run off AC or DC. The digits are completely separate from each other and, as such, multiple digits can appear concurrently as in the picture to the right. These specific tubes were manufactured in the USSR and used as numerical displays before the invention of the 7 segment layout.</p>

<p>The final additions to the code were a daylight savings time switch and the <code class="highlighter-rouge">cycleTubes</code> function. The DST switch allows for a user to efficiently move the hour forward and back on demand. The <code class="highlighter-rouge">cycleTubes</code> function gets called every hour, on the hour, to prevent cathode poisoning on the nixie tubes. Cathode poisoning occurs when a digit is on for a prolonged period of time. The coating on this digit sprays onto nearby digits resulting in dimmer patches and less clear numbers. Cycling through all the possible displays once an hour, prevents this.</p>

<p>The final addition was the boost converter to power the nixies. Each tube was individually tested for operation and connected to the circuit. A 47KΩ resistor placed on the anodes of each tube to prevents high current from frying the BCD chips. The addition of a 5V voltage regulator allowed the logical components and the nixies to share the same singular power source. The clock was now complete.</p>

<h2 id="media">Media</h2>
<table>
  <tr>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170124_160911.jpg" />
    </td>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170120_200540.jpg" />
    </td>
  </tr>
  <tr>
    <th>Demonstrating the layering of digits on a Nixie Tube. "6" is illuminated here.</th>
    <th>130V-170V DC Boost Converter Circuit</th>
  </tr>
  <tr>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170202_131447.jpg" />
    </td>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Short%20ISP/20170203_181132.jpg" />
    </td>
  </tr>
  <tr>
    <th>Accurate time displaying on the clock</th>
    <th>Nixie tubes at night</th>
  </tr>
  <tr>
    <th colspan="2">Link to YouTube Video: <a href="https://youtu.be/cuN6FGU5eqE">https://youtu.be/cuN6FGU5eqE</a></th>
  </tr>
</table>

<h2 id="code">Code</h2>
<h3 id="main-clock-code">Main Clock Code</h3>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">//Name: Ethan McAuliffe</span>
<span class="c1">//Date: 2016-12-17</span>
<span class="c1">//Project: Nixie Tube Clock</span>
<span class="c1">//Status: Functional and Tested</span>

<span class="c1">//Libraries</span>
<span class="cp">#include &lt;Wire.h&gt;
</span>
<span class="c1">//Constants</span>
<span class="cp">#define serial 2
#define latch 3
#define clk 4
#define DSTPin 9
#define rtc 0x68
</span>
<span class="c1">//Variables</span>
<span class="n">String</span> <span class="n">currentTime</span><span class="p">;</span> <span class="c1">// current time formatted for the shift registers</span>
<span class="kt">int8_t</span> <span class="n">daylight</span><span class="p">;</span> <span class="c1">//daylight savings offset</span>
<span class="kt">uint8_t</span> <span class="n">cHour</span><span class="p">;</span> <span class="c1">//current hour</span>
<span class="kt">uint8_t</span> <span class="n">cMinute</span><span class="p">;</span> <span class="c1">//current minute</span>
<span class="kt">uint8_t</span> <span class="n">cSecond</span><span class="p">;</span>  <span class="c1">//current second</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>

  <span class="n">pinMode</span><span class="p">(</span><span class="n">serial</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">latch</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>

  <span class="n">pinMode</span><span class="p">(</span><span class="n">DSTPin</span><span class="p">,</span> <span class="n">INPUT_PULLUP</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//Interface with the RTC</span>
  <span class="n">Wire</span><span class="p">.</span><span class="n">beginTransmission</span><span class="p">(</span><span class="n">rtc</span><span class="p">);</span>
  <span class="n">Wire</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">//prepare rtc to be read from</span>
  <span class="n">Wire</span><span class="p">.</span><span class="n">endTransmission</span><span class="p">();</span>
  <span class="n">Wire</span><span class="p">.</span><span class="n">requestFrom</span><span class="p">(</span><span class="n">rtc</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">Wire</span><span class="p">.</span><span class="n">available</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
  <span class="c1">//read current  minute and hour</span>
  <span class="n">cSecond</span> <span class="o">=</span> <span class="n">readTime</span><span class="p">(</span><span class="n">Wire</span><span class="p">.</span><span class="n">read</span><span class="p">());</span><span class="c1">//second</span>
  <span class="n">cMinute</span> <span class="o">=</span> <span class="n">readTime</span><span class="p">(</span><span class="n">Wire</span><span class="p">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">);</span> <span class="c1">//minute</span>
  <span class="n">cHour</span> <span class="o">=</span> <span class="n">readTime</span><span class="p">(</span><span class="n">Wire</span><span class="p">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">);</span> <span class="c1">//hour</span>

  <span class="c1">//if the daylight savings time switch is on, add add 1 hour to the current time</span>
  <span class="n">digitalRead</span><span class="p">(</span><span class="n">DSTPin</span><span class="p">)</span> <span class="o">==</span> <span class="n">LOW</span> <span class="o">?</span> <span class="p">(</span><span class="n">cHour</span> <span class="o">==</span> <span class="mi">23</span> <span class="o">?</span> <span class="n">daylight</span> <span class="o">=</span> <span class="o">-</span><span class="mi">23</span> <span class="o">:</span> <span class="n">daylight</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="n">daylight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="c1">//takes current time and sends it to the shift registers</span>
  <span class="n">currentTime</span> <span class="o">=</span> <span class="n">timeData</span><span class="p">(</span><span class="n">cHour</span> <span class="o">+</span> <span class="n">daylight</span><span class="p">,</span> <span class="n">cMinute</span><span class="p">);</span> <span class="c1">// current time binary data. Each nibble represents a digit.</span>
  <span class="n">shiftTime</span><span class="p">(</span><span class="n">serial</span><span class="p">,</span> <span class="n">latch</span><span class="p">,</span> <span class="n">clk</span><span class="p">,</span> <span class="n">currentTime</span><span class="p">);</span> <span class="c1">//send current time to the shift registers</span>

  <span class="c1">//cycles nixie tubes every hour that they are on</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">cMinute</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">cSecond</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cycleTubes</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//Functions</span>
<span class="n">String</span> <span class="nf">timeData</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">h</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">m</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//takes the current time and outputs the required data for shift register</span>
  <span class="n">String</span> <span class="n">minutesOnes</span> <span class="o">=</span> <span class="n">toNibble</span><span class="p">(</span><span class="n">String</span><span class="p">((</span><span class="n">m</span> <span class="o">%</span> <span class="mi">10</span><span class="p">),</span> <span class="n">BIN</span><span class="p">));</span><span class="c1">//converts ones digit to binary nibble</span>
  <span class="n">String</span> <span class="n">minutesTens</span> <span class="o">=</span> <span class="n">toNibble</span><span class="p">(</span><span class="n">String</span><span class="p">((</span><span class="n">m</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">%</span> <span class="mi">10</span><span class="p">),</span> <span class="n">BIN</span><span class="p">));</span><span class="c1">//converts tens digit to binary nibble</span>
  <span class="n">String</span> <span class="n">hoursOnes</span> <span class="o">=</span> <span class="n">toNibble</span><span class="p">(</span><span class="n">String</span><span class="p">((</span><span class="n">h</span> <span class="o">%</span> <span class="mi">10</span><span class="p">),</span> <span class="n">BIN</span><span class="p">));</span>
  <span class="n">String</span> <span class="n">hoursTens</span> <span class="o">=</span> <span class="n">toNibble</span><span class="p">(</span><span class="n">String</span><span class="p">((</span><span class="n">h</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">%</span> <span class="mi">10</span><span class="p">),</span> <span class="n">BIN</span><span class="p">));</span>

  <span class="c1">//output a string of the all binary nibbles for each digit in the time</span>
  <span class="n">String</span> <span class="n">output</span> <span class="o">=</span> <span class="n">hoursTens</span> <span class="o">+</span> <span class="n">hoursOnes</span> <span class="o">+</span> <span class="n">minutesTens</span> <span class="o">+</span> <span class="n">minutesOnes</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">output</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">String</span> <span class="nf">toNibble</span> <span class="p">(</span><span class="n">String</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//converts binary character string to a binary nibble</span>
  <span class="n">String</span> <span class="n">output</span> <span class="o">=</span> <span class="n">input</span><span class="p">;</span>
  <span class="kt">uint8_t</span> <span class="n">lngth</span> <span class="o">=</span> <span class="n">output</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">i</span> <span class="o">=</span> <span class="n">lngth</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//adds zeros before binary value until there is a whole nibble</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s">"0"</span> <span class="o">+</span> <span class="n">output</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">output</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">shiftTime</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">serialPin</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">latchPin</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">clockPin</span><span class="p">,</span> <span class="n">String</span> <span class="n">inputTime</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//sends a binary string to shift registers</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">latchPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span><span class="c1">//set latch pin low to prepare for data to be sent</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int8_t</span> <span class="n">i</span> <span class="o">=</span> <span class="n">inputTime</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//iterates over entire length of input string</span>
    <span class="n">byte</span> <span class="n">currentChar</span> <span class="o">=</span> <span class="n">inputTime</span><span class="p">.</span><span class="n">charAt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="c1">//gets character "i" in the binary string</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">currentChar</span> <span class="o">==</span> <span class="sc">'1'</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//if character is a one send a high signal to the shift registers</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">serialPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clockPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clockPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">serialPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">//if character is a zero send a low signal</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">serialPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clockPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clockPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">latchPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span><span class="c1">//lock in data on shift register</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">cycleTubes</span> <span class="p">()</span> <span class="p">{</span><span class="c1">//cycle all of the digits in unison to prevent cathode poisioning</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">uint16_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">uint8_t</span> <span class="n">cycleDigits</span> <span class="o">=</span> <span class="p">((</span><span class="n">i</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">cycleData</span> <span class="o">=</span> <span class="n">timeData</span><span class="p">(</span><span class="n">cycleDigits</span><span class="p">,</span> <span class="n">cycleDigits</span><span class="p">);</span>
    <span class="n">shiftTime</span><span class="p">(</span><span class="n">serial</span><span class="p">,</span> <span class="n">latch</span><span class="p">,</span> <span class="n">clk</span><span class="p">,</span> <span class="n">cycleData</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="mi">15</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">uint8_t</span> <span class="nf">readTime</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//makes time human readable (0-60 and 0-24)</span>
  <span class="k">return</span> <span class="p">((</span><span class="n">input</span> <span class="o">/</span> <span class="mi">16</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">input</span> <span class="o">%</span> <span class="mi">16</span><span class="p">));</span>
<span class="p">}</span></code></pre></figure>

<h2 id="conclusion">Conclusion</h2>
<p>In conclusion, I found this project to be quite enjoyable and informative. I enjoyed working with even higher voltages than my previous project, despite being shocked more than a few times. It was fun to learn how to use niche devices to create a device that we use multiple times a day. I also learned some electronic history by reading up on nixie tubes and why they were used. I fully intend to extend this project further and create a custom circuit board using EAGLE as well as designing an enclosure using ViaCAD. I also intend to finally decode the mystery of boost converters (although I believe I know where I went wrong). I put an immense amount of time into this project, but I do not believe that any of it was wasted. I am very much satisfied with my final product.</p>

<h2 id="reference">Reference</h2>
<p>Alberto. “ATMEGA328 &amp; Arduino Pinout Diagram.” PighiXXX, 18 Feb. 2013, <a href="http://v.gd/miZ3gY">http://v.gd/miZ3gY</a>.</p>

<p>Boxall, John. “Using DS1307 and DS3231 Real-Time Clock Modules with Arduino.” Tronixstuff, Tronixlabs, 1 Dec. 2014, <a href="http://tronixstuff.com/2014/12/01/tutorial-using-ds1307-and-ds3231-real-time-clock-modules-with-arduino/">http://tronixstuff.com/2014/12/01/tutorial-using-ds1307-and-ds3231-real-time-clock-modules-with-arduino/</a>.</p>

<p>Harrison, Mike. “Nixie Power Supply.” Mike’s Electric Stuff, <a href="http://www.electricstuff.co.uk/nixpsu.html">http://www.electricstuff.co.uk/nixpsu.html</a>.</p>

<p>“IN-14 (ИН-14) Datasheet.” TubeHobby, Gazotron, <a href="http://tubehobby.com/datasheets/in14.pdf">http://tubehobby.com/datasheets/in14.pdf</a>.</p>

<p>“K155ID1 (К155ИД1) Datasheet.” TubeHobby, CCCP, <a href="http://tubehobby.com/datasheets/k155id1.pdf">http://tubehobby.com/datasheets/k155id1.pdf</a>.</p>

<p>Onno. “Neon Nostalgia.” Neon Nostalgia, 20 Oct. 2000, <a href="http://www.glowbug.nl/neon/index.html">http://www.glowbug.nl/neon/index.html</a>.</p>

<p>Urbach, Claus-Dieter. “FAQ Nixietubes.” NixieClocks.de, <a href="http://www.nixieclocks.de/FAQ_Nixietubes.pdf">http://www.nixieclocks.de/FAQ_Nixietubes.pdf</a>.</p>
</section>
  
<footer>
  <div class="tags">
    
    <a class="tag" href="/tags#ER">#ER</a>
    
    <a class="tag" href="/tags#ACES">#ACES</a>
    
    <a class="tag" href="/tags#Grade 11">#Grade 11</a>
    
    <a class="tag" href="/tags#ISP">#ISP</a>
    
  </div>
</footer>


</article>

<!-- Disqus -->


<!--ads-->

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- End of Blog ads -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3976272342678634"
     data-ad-slot="5740189100"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- Post navigation -->

  <div id="post-nav">
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/2017/03/11/Wireless-Communication.html">
        Wireless Communication: Temperature Data Logging
      </a>
  </div>
  
</div>



    </div>
    
<script src="/assets/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">‍</p>
	<p class="text">© Ethan McAuliffe 2018 | All Rights Reserved.</p>
</footer>


  </body>
</html>
