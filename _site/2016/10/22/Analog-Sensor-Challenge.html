<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>Challenge 1. Analog Sensor | Ethan McAuliffe's Blog</title>
	<meta name="description" content="PurposeThe purpose of this circuit is to display the distance an object is from a sensor on a LCD display. The display is to show the distance in cm an objec...">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://emcauliffe.ca/Images/favicon.png" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/2016/10/22/Analog-Sensor-Challenge.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="Ethan McAuliffe's Blog" href="/feed.xml" />

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js"></script>
	

	<!-- Google Analytics -->
	
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-113342409-1', 'auto');
	ga('send', 'pageview');
	</script>
	
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-3976272342678634",
	    enable_page_level_ads: true
	  });
	</script>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#ffffff",
      "text": "#000000"
    },
    "button": {
      "background": "#1ABC9C",
      "text": "#ffffff"
    }
  },
  "theme": "edgeless"
})});
</script>

</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<h1 class="site-title">
			<a href="/">Ethan McAuliffe's Blog</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<li>
				<a class="page-link" href="/tags.html">
					tags
				</a>
			</li>
			
			
			<!-- Social icons from Font Awesome, if enabled  -->
			
<li>
	<a href="/feed.xml" title="Follow RSS feed">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>



<li>
	<a href="mailto:ethan@emcauliffe.ca" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/emcauliffe" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>







<li>
	<a href="https://www.linkedin.com/in/ethan-mcauliffe/" title="Follow on LinkedIn">
		<i class="fa fa-fw fa-linkedin"></i>
	</a>
</li>





















<li>
	<a href="https://www.youtube.com/user/ethanmrsgc" title="Follow on YouTube">
		<i class="fa fa-fw fa-youtube"></i>
	</a>
</li>



            <!-- Search bar -->
            
            <li>
            <form action="/search.html" method="get">
                <input type="text" id="search-box" name="query" placeholder="Search" class="">
                <button type="submit" class="">
                    <i class="fa fa-fw fa-search"></i>
                </button>
            </form>
            </li>
            
		</ul>
	</nav>

</header>

    <div class="content">
      <article >
  <!--<header style="background-image: url('/')">-->
  <header style="background-image: url()">
    <h1 class="title">Challenge 1. Analog Sensor</h1>
    
    <p class="meta">
      October 22, 2016
      
    </p>
  </header>
  <section class="post-content"><h2 id="purpose">Purpose</h2>
<p>The purpose of this circuit is to display the distance an object is from a sensor on a LCD display. The display is to show the distance in cm an object is away from the sensor, a graphical representation of this distance, and the raw analog voltage of the sensor.</p>

<table>
  <thead>
    <tr>
      <th>Parts List</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Arduino Uno</td>
      <td>GP2Y0A41SK0F Infra-Red Distance Sensor with Analog Output</td>
    </tr>
    <tr>
      <td>10KΩ Potentiometer</td>
      <td>1447-ADA Standard White on Blue LCD 16x2</td>
    </tr>
    <tr>
      <td>USB Type A to Type B Cable</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="procedure">Procedure</h2>
<p>This challenge began with reading the datasheet and the explanation on the ACES website to understand what was going on in the video provided, and how to replicate it. The next step was to wire up the LCD display to the Arduino and connecting the IR sensor for the code to run on. After that, the circuit portion was complete and the code section began.</p>

<p>The code section began with importing the LCD library and configuring the required custom characters. The program needed eight custom characters of different sized rectangles. The next step was the creation of an array to store the hexadecimal values of these rectangle characters. After that was the creation of the desired variables for the program. These included the length of the array of custom characters, the input analog voltage, the distance in cm the object is away from the sensor and the amount of rectangles to display on the LCD.</p>

<p>Following that, the writing of the <code class="highlighter-rouge">clearScreen</code> function commenced. It used three inputs, column, row and number of cells, to create a <code class="highlighter-rouge">for</code> loop that changed the desired characters to a blank “space” character. The next activity was to configure the LCD panel. The panel needed importing, the custom characters needed creating and the configuring of the constant text needed completing. Completing these tasks required the use of the <code class="highlighter-rouge">lcd.begin</code> function to import the display, the custom character creation for loop discussed in class and manually setting the position of the constant text in the setup function. Completing the continuously running code was the next step. The <code class="highlighter-rouge">iRead</code> variable created earlier stored the reading of the analog voltage from pin <code class="highlighter-rouge">A0</code> on the Arduino. The map function converted this reading to the distance, which was, in cm, the distance the object was away from the sensor. The <code class="highlighter-rouge">disp</code> variable divided this map function in 4 to determine the amount of rectangles to display on a scale of one to eight. The next step was adding a <code class="highlighter-rouge">for</code> loop to progressively show to number of rectangles based on the <code class="highlighter-rouge">disp</code> variable. After adding the <code class="highlighter-rouge">delay</code> function and the <code class="highlighter-rouge">clearScreen</code> functions to remove the variables, the code was finished.</p>

<h2 id="media">Media</h2>
<table>
  <tr>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Challenge%201.%20Analog%20Read/Picture1.png" />
    </td>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Challenge%201.%20Analog%20Read/Picture2.png" />
    </td>
  </tr>
  <tr>
    <th>Fritzing Diagram</th>
    <th>Picture of the Distance Sensor Circuit</th>
  </tr>
  <tr>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Challenge%201.%20Analog%20Read/Picture3.png" />
    </td>
    <td>
      <img src="https://emcauliffe.ca/Images/ER%20Reports/Grade%2011/Challenge%201.%20Analog%20Read/Picture4.png" />
    </td>
  </tr>
  <tr>
    <th>Picture of LCD with no object in front of sensor</th>
    <th>Picture of LCD with paper very close to sensor</th>
  </tr>
  <tr>
    <th colspan="2">Link to YouTube Video: <a href="https://youtu.be/H-DXkPjyVYc">https://youtu.be/H-DXkPjyVYc</a></th>
  </tr>
</table>

<h2 id="code">Code</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">//Name: Ethan McAuliffe</span>
<span class="c1">//Date: 2016-10-21</span>
<span class="c1">//Project: Distance Sensor Challenge</span>
<span class="cp">#include &lt;LiquidCrystal.h&gt;
</span>
<span class="n">LiquidCrystal</span> <span class="n">lcd</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>

<span class="kt">uint8_t</span> <span class="n">customs</span><span class="p">[]</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1f</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="n">byte</span> <span class="n">numCustom</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">customs</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">;</span>
<span class="kt">uint16_t</span> <span class="n">iRead</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">disp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">clearScreen</span><span class="p">(</span><span class="n">byte</span> <span class="n">col</span><span class="p">,</span> <span class="n">byte</span> <span class="n">row</span><span class="p">,</span> <span class="n">byte</span> <span class="n">numCells</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//function to clear requested number of cells in requested position</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">row</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numCells</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numCustom</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="c1">//creates custom rectangle characters</span>
    <span class="n">lcd</span><span class="p">.</span><span class="n">createChar</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">customs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Read:"</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Dist:"</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Disp:"</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// clear inputs</span>
  <span class="n">clearScreen</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">//clears raw analog data</span>
  <span class="n">clearScreen</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span><span class="c1">//clears distance in cm</span>
  <span class="n">clearScreen</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">disp</span><span class="p">);</span><span class="c1">//clears required distance rectangles</span>

  <span class="c1">//read and map inputs</span>
  <span class="n">iRead</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">distance</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">min</span><span class="p">(</span><span class="n">iRead</span><span class="p">,</span><span class="mi">634</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">634</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span><span class="c1">//min function removes input above 3.1V</span>
  <span class="c1">//determine the number of bars to be shown</span>
  <span class="n">disp</span> <span class="o">=</span> <span class="p">(</span><span class="n">distance</span> <span class="o">/</span> <span class="mi">4</span><span class="p">);</span>

  <span class="c1">// output</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">iRead</span><span class="p">);</span><span class="c1">//print raw analog read</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">distance</span><span class="p">);</span><span class="c1">//print distance in cm</span>
  <span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">disp</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">lcd</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>                <span class="c1">//prints distance graph characters</span>
  <span class="p">}</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span><span class="c1">//allows time for a human to read the data on the screen</span>
<span class="p">}</span></code></pre></figure>

<h2 id="conclusion">Conclusion</h2>
<p>In conclusion, this challenge taught me how to apply the information I learned in class. A large portion of the code that I wrote had already been written in the demonstrations we completed in class. I believe that this project was useful for testing if I was able to comprehend what was being taught in class. I learned how to use the infra-red distance sensor provided to read the distance an object is away in cm. The circuit and code, when configured properly, are successful at completing their purpose.</p>

<h2 id="reference">Reference</h2>
<p>D’Arcy, Chris. “RSGC ACES. 2016/17 TEI3M Challenge 1.” YouTube. YouTube, 21 Oct. 2016. Web. 22 Oct. 2016. <a href="https://www.youtube.com/watch?v=kEHuVYXXAEA">https://www.youtube.com/watch?v=kEHuVYXXAEA</a>.</p>

<p>Fried, Limor. “Character LCDs.” Wiring a Character LCD. Adafruit, n.d. Web. 22 Oct. 2016. <a href="https://learn.adafruit.com/character-lcds/wiring-a-character-lcd">https://learn.adafruit.com/character-lcds/wiring-a-character-lcd</a>.</p>

<p>“GP2Y0A41SK0F.” Sharp World (n.d.): n. pag. Sharp World. Sharp. Web. 22 Oct. 2016. <a href="http://www.sharp-world.com/products/device/lineup/data/pdf/datasheet/gp2y0a41sk_e.pdf">http://www.sharp-world.com/products/device/lineup/data/pdf/datasheet/gp2y0a41sk_e.pdf</a>.</p>
</section>
  
<footer>
  <div class="tags">
    
    <a class="tag" href="/tags#ER">#ER</a>
    
    <a class="tag" href="/tags#ACES">#ACES</a>
    
    <a class="tag" href="/tags#Grade 11">#Grade 11</a>
    
    <a class="tag" href="/tags#Challenge">#Challenge</a>
    
  </div>
</footer>


</article>

<!-- Disqus -->


<!--ads-->

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- End of Blog ads -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3976272342678634"
     data-ad-slot="5740189100"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/2016/05/24/ISP-Digital-Logic-Gates.html">
        ISP: Digital Logic Gates
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/2016/11/26/555-Boost-Converter.html">
        555 Project: Boost Converter
      </a>
  </div>
  
</div>



    </div>
    
<script src="/assets/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">‍</p>
	<p class="text">© Ethan McAuliffe 2018 | All Rights Reserved.</p>
</footer>


  </body>
</html>
