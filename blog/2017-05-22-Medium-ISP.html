<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Ethan McAuliffe</title><meta name="description" content="My personal website and blog"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/1bf78e4fad6a32832712.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1bf78e4fad6a32832712.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6794465708b9ff3a7d52.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6794465708b9ff3a7d52.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-ddd010a953737b6e3536.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4809d8b3f3ef3c100198.js" defer=""></script><script src="/_next/static/chunks/pages/_app-999b137a986838297186.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5BpostName%5D-faa1099c27acb07b2ee8.js" defer=""></script><script src="/_next/static/SFgJJupdZHNk8n2P4HqqA/_buildManifest.js" defer=""></script><script src="/_next/static/SFgJJupdZHNk8n2P4HqqA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Post_container__39vXa"><div class="Post_backButton__2By7j"><a href="/blog">◀ All Posts</a></div><h1>Medium ISP: Word Clock and Weather Predictor</h1><h2>Purpose</h2><p>The purpose of this project is to create a clock capable of showing the current time, temperature, humidity and short-term forecast in a clean, sleek way. The clock is to read the time off of an Real Time Clock (RTC) IC, read air pressure, humidity and temperature wirelessly from a separate device, and display everything in an easy to understand way. To display the time, words for each five minute interval and each hour are to illuminate. To display the current temperature and relative humidity percentage (%RH), the first ten columns are to light up and show the required digits, similar to a 7-segment display. A &quot;C&quot; and a &quot;%&quot; sign will also illuminate for temperature and %RH respectively. The weather sensor is to be separate from the clock and communicate with the main clock via a NRF24L01+ wireless communication IC.</p><table><thead><tr><th>Parts List</th><th></th></tr></thead><tbody><tr><td>2× Arduino Uno</td><td>2× NRF24L01+ Wireless Chip</td></tr><tr><td>93× Red-Green BiColour LEDs</td><td>4&#x27;×2&#x27; Medium Density Fibreboard (MDF)</td></tr><tr><td>Clear Acrylic Sheet</td><td>Piano Black Plastic Sheet</td></tr><tr><td>BME280 I2C or SPI Temperature Humidity Pressure Sensor</td><td>DS1307 I2C Real Time Clock</td></tr></tbody></table><h2>Procedure</h2><a href="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/chrome_2017-05-22_14-23-26.png"><img src="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/chrome_2017-05-22_14-23-26.png"/></a>This project begins with designing the main clock face. It is paramount that the clock face contains all the necessary words to display any five minute interval of time. This step also requires careful planning of the order that words will appear to ensure readability (top to bottom, left to right) and that there is adequate spacing between each word. Each line must also have the same number of characters, and the &quot;C&quot; and &quot;%&quot; characters must be present only in the far-right column. Creation of the design initially began in a text file, and was then transferred to a table in a word document to add colour. Creation of the final design required using a CAD program, in this case ViaCAD 3D, to ensure proper spacing of characters. Mr. Elia helped greatly with this. The final step in designing the clock face was sending the design files off to be laser cut in acrylic and plastic. Assembly began when the laser cut pieces arrived. Gluing the characters  into place meant ensuring that the block shape of each was clear acrylic, and the inner &quot;floating&quot; parts of the characters were the same black plastic as the rest of the clock face. This allowed for avoiding a stencil font while still maintaining readability.<p>Creating the wireless weather sensor was the next step. This began with reading the datasheet to understand where to find data on the IC and how to access it using Serial Peripheral Interface (SPI). Pictured on the previous page is the pinout for the BME280 sensor. It is a surface mount device.</p><p>SPI works similar to serial communication, but with the added benefit of the slave device (in this case the BME280 sensor) being able to contact the master device as well (in this case the Arduino Uno). Unlike I2C, it requires 4 pins. See Wireless Communication: Temperature Data Logging for more information on Serial Communication. SPI is the chosen protocol in this case because it means using only one communication protocol to interact with the wireless transmitter and the weather sensor.</p><p>Configuring the BME280 chip is important so that that reports the values as desired. The <code>sensorConfig() </code> function configures the sensor by performing a reset, identifying how often the sensor is to record information, and how sensitive the sensor should be to sudden changes in values. It also initiates <code>getCompensationData()</code>.</p><p>The data from the BME280 chip requires processing before it can accurately display the time. This is because each individual chip has different sensitivities to the environment. The manufacturer, Bosch, solves this problem by storing &quot;compensation data&quot; in specific registers on the chip. The <code>getCompensationData()</code> function in the Remote Sensor code obtains this data. The <code>getCompensationData()</code> function is only called once as the compensation data never changes. A special <code>struct</code> called <code>compData</code> stores this data because some values have different lengths, some are &quot;signed&quot; and some are &quot;unsigned&quot;. This was problematic as the datasheet provided incorrect information on which characters were signed or unsigned. by comparing the individual compensation data readouts to those of the Adafruit library, it was easy to deduce which were incorrect.</p><p>Signed characters use format called <em>Two&#x27;s Compliment</em> to store their values. Using an 8-bit byte as an example, two&#x27;s compliment has the ability to store a value ranging from -128 to 127 inclusive. Two&#x27;s compliment works by accepting a positive integer from 0-128, then performing a bitwise &quot;NOT&quot;, and adding 1. This value now represents a negative integer. The computer can tell that the value is negative, because the most significant bit of binary integer is a &quot;1&quot;. For more information on bitwise, see the BiColour LED Matrix project.</p><p>Recording the uncompensated, or &quot;raw&quot;, data from the sensor happens after reading the compensation data. The <code>getRawData()</code> function obtains said data and stores it in a <code>struct</code> called <code>rawData</code>. This data is then run through specific algorithms defined in the datasheet, which use the compensation data recorded earlier, to get the temperature in degrees Celsius, the pressure in Pascals, and the relative humidity percentage. These algorithms are <code>temp()</code>, <code>pressure()</code> and <code>humidity()</code> for temperature, pressure and humidity respectively. Each returns a value of specific size for easy formatting and transmission using the <code>transmit()</code> function.</p><p>The <code>transmit()</code> function compacts the temperature, pressure and humidity data into one unsigned, 64-bit integer, and transmits it wirelessly via the NRF24L01+. The program then uses the <code>deepSleep()</code> function to enter the peripherals into low power mode, wait, and then turn the sensor back on. This function uses SPI to write to a specific register on the BME280 sensor requesting that it enter sleep mode.</p><p>The clock code first uses I2C to intercept the current hour and minute from the DS1307 RTC. This code is works almost identically to that used in the Nixie Tube Clock project. The <code>updateTime()</code> function obtains this time and stores it in a <code>struct</code> called <code>currentTime</code> for easy access. This function also converts the 24-hour time stored on the RTC into 12-hour time for the clock to display.</p><p>The <code>receive()</code> function then looks for available data from the remote sensor, formats the recieved 64 bit, unsigned integer into temperature, pressure and humidity again, and then stores it in a <code>struct</code> called <code>senseData</code>.</p><p>The current time is then formatted into specific words and printed to the serial monitor via the <code>printTimeAndData()</code> function. This function first reads the current minute and maps it to a value from 0-12, inclusive. This value is then used to query the <code>minuteText[]</code> array and determine what text to show for the current minute. Next the function determines if the clock should display &quot;TO&quot; or &quot;PAST&quot; the hour. The clock only switches to &quot;TO&quot; after 35 minutes of the current hour have elapsed. The mapped value is again used to determine this. The final step in showing the current time is displaying the appropriate hour in relation to the current time. For this the current hour value minus one (because arrays are zero indexed) index of <code>thehourText[]</code> array prints to the serial monitor. If the minutes, however, are greater than 35, the clock must display the future hour as the clock will now show &quot;TO&quot; instead of &quot;PAST&quot;. As such the index of the current hour is directly indexed into the <code>hourText[]</code> array. Finally the function prints the data intercepted from the remote sensor to the serial monitor. This includes whether or not the weather is improving, or worsening.</p><p>The <code>isWeatherImproving()</code> function uses an average of the pressure from each five minute interval over the past hour plus the current pressure and compares it against the oldest pressure reading. If the average is less than the oldest reading, pressure is decreasing  and the weather is getting worse. Otherwise, the weather is improving and the function returns <code>true</code>.</p><p>While simple at first, numerous obstacles faced the construction of this clock later on. Cutting the perfectly square back plate of the clock and wooden borders of the face plate was the first step. Gluing the cardstock baffles which ensured no light bleed from neighbouring characters followed. This ensured that the clock would be easy to read. Problems arose in the final steps when planning out a NeoPixel LED matrix for backlighting, as the NeoPixels were non-functional. BiColour Red/Green LEDs replaced the NeoPixels after a last-minute visit to a hardware store. Unfortunately, however, the ATmega328P does not have enough ports to control the 93 LED matrix, and as such, the clock cannot function. Painting the clock and gluing the faceplate in position were the final steps. A possible solution to this problem would be a larger Arduino device to control the entire matrix, or (the better option) to purchase a working strip of NeoPixels.</p><h2>Media</h2><table><tr><td><a href="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0034.jpg"><img src="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0034.jpg"/></a></td><td><a href="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0036.jpg"><img src="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0036.jpg"/></a></td></tr><tr><th>Drilling holes for LEDs</th><th>Soldering LED matrix</th></tr><tr><td><a href="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0031.jpg"><img src="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0031.jpg"/></a></td><td><a href="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0042.jpg"><img src="/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0042.jpg"/></a></td></tr><tr><th>Testing Main clock module without matrix</th><th>Illuminated Clock Face</th></tr><tr><th colSpan="2">Link to YouTube Video: <a href="https://youtu.be/pIHCYQPU6w8">https://youtu.be/pIHCYQPU6w8</a></th></tr></table><h2>Code</h2><h3>Main Clock Code</h3><pre><code class="hljs language-arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Wire.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nRF24L01.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;printf.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;RF24.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;RF24_config.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> RTC_ADDRESS 0x68</span>

<span class="hljs-function">RF24 <span class="hljs-title">radio</span><span class="hljs-params">(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>)</span></span>;
<span class="hljs-type">uint8_t</span> addresses[][<span class="hljs-number">6</span>] = {<span class="hljs-string">&quot;3g8wM&quot;</span>, <span class="hljs-string">&quot;0Us9x&quot;</span>};
<span class="hljs-type">uint64_t</span> data;
<span class="hljs-type">bool</span> goodWeather;
<span class="hljs-type">String</span> hourText[] = {<span class="hljs-string">&quot;ONE&quot;</span>, <span class="hljs-string">&quot;TWO&quot;</span>, <span class="hljs-string">&quot;THREE&quot;</span>, <span class="hljs-string">&quot;FOUR&quot;</span>, <span class="hljs-string">&quot;FIVE&quot;</span>, <span class="hljs-string">&quot;SIX&quot;</span>, <span class="hljs-string">&quot;SEVEN&quot;</span>, <span class="hljs-string">&quot;EIGHT&quot;</span>, <span class="hljs-string">&quot;NINE&quot;</span>, <span class="hljs-string">&quot;TEN&quot;</span>, <span class="hljs-string">&quot;ELEVEN&quot;</span>, <span class="hljs-string">&quot;TWELVE&quot;</span>};
<span class="hljs-type">String</span> minuteText[] = {<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;FIVE&quot;</span>, <span class="hljs-string">&quot;TEN&quot;</span>, <span class="hljs-string">&quot;A QUARTER&quot;</span>, <span class="hljs-string">&quot;TWENTY&quot;</span>, <span class="hljs-string">&quot;TWENTY FIVE&quot;</span>, <span class="hljs-string">&quot;A HALF&quot;</span>, <span class="hljs-string">&quot;TWENTY FIVE&quot;</span>, <span class="hljs-string">&quot;TWENTY&quot;</span>, <span class="hljs-string">&quot;A QUARTER&quot;</span>, <span class="hljs-string">&quot;TEN&quot;</span>, <span class="hljs-string">&quot;FIVE&quot;</span>, <span class="hljs-string">&quot;&quot;</span>};
<span class="hljs-type">uint32_t</span> pressureAverage[<span class="hljs-number">13</span>];
<span class="hljs-type">uint8_t</span> durationThroughHour;

<span class="hljs-keyword">struct</span> <span class="hljs-title hljs-class">SENSORDATA</span> {
  <span class="hljs-type">int8_t</span> temp;
  <span class="hljs-type">float</span> pressure;
  <span class="hljs-type">uint8_t</span> hum;
};

<span class="hljs-keyword">struct</span> <span class="hljs-title hljs-class">CURRENT_TIME</span> {
  <span class="hljs-type">uint8_t</span> hours;
  <span class="hljs-type">uint8_t</span> minutes;
};

SENSORDATA senseData;
CURRENT_TIME currentTime;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">9600</span>);
  radio.<span class="hljs-built_in">begin</span>();
  <span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">begin</span>();

  radio.<span class="hljs-built_in">setChannel</span>(<span class="hljs-number">99</span>);

  radio.<span class="hljs-built_in">openReadingPipe</span>(<span class="hljs-number">1</span>, addresses[<span class="hljs-number">0</span>]);
  radio.<span class="hljs-built_in">startListening</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">updateTime</span>();
  <span class="hljs-built_in">receive</span>();
  <span class="hljs-built_in">printTimeAndData</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">receive</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span> (radio.<span class="hljs-built_in">available</span>()) {
    radio.<span class="hljs-built_in">read</span>(&amp;data, <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">uint64_t</span>));
    senseData.temp = (<span class="hljs-type">int8_t</span>)(data &gt;&gt; <span class="hljs-number">40</span>);
    senseData.pressure = ((data &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFFFFFFFF</span>) / <span class="hljs-number">25600.00</span>;
    senseData.hum = (<span class="hljs-type">uint8_t</span>)data &amp; <span class="hljs-number">0xFF</span>;
    pressureAverage[durationThroughHour] = (<span class="hljs-type">uint32_t</span>)senseData.pressure;
  }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">updateTime</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">beginTransmission</span>(RTC_ADDRESS);
  <span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">write</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">//prepare rtc to be read from</span>
  <span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">endTransmission</span>();
  <span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">requestFrom</span>(RTC_ADDRESS, <span class="hljs-number">7</span>);
  <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">available</span>());
  currentTime.minutes =  <span class="hljs-built_in">readTime</span>(<span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">read</span>() &amp; <span class="hljs-number">0x7f</span>); <span class="hljs-comment">//minute</span>
  <span class="hljs-type">uint8_t</span> hours = <span class="hljs-built_in">readTime</span>(<span class="hljs-built_in">Wire</span>.<span class="hljs-built_in">read</span>() &amp; <span class="hljs-number">0x3f</span>);
  <span class="hljs-keyword">if</span> (hours &gt; <span class="hljs-number">12</span>) {
    hours = hours - <span class="hljs-number">12</span>;
  }
  <span class="hljs-keyword">if</span> (hours == <span class="hljs-number">0</span>) {
    hours == <span class="hljs-number">12</span>;
  }
  currentTime.hours = hours;
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isWeatherImproving</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-type">uint32_t</span> pressureSum;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">uint8_t</span> ii; ii &lt; <span class="hljs-number">13</span>; ii++) {
    pressureSum += pressureAverage[ii];
  }
  <span class="hljs-keyword">if</span> (pressureSum / <span class="hljs-number">13</span> &gt; (pressureAverage[<span class="hljs-number">12</span> - durationThroughHour])) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printTimeAndData</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;It is &quot;</span>);
  durationThroughHour = <span class="hljs-built_in">map</span>(currentTime.minutes, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(minuteText[durationThroughHour]);
  <span class="hljs-keyword">if</span> (durationThroughHour != <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (durationThroughHour &lt;= <span class="hljs-number">6</span>) {
      <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; PAST &quot;</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; TO &quot;</span>);
    }
  }
  <span class="hljs-keyword">if</span> (currentTime.minutes &lt; <span class="hljs-number">35</span>) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(hourText[currentTime.hours - <span class="hljs-number">1</span>]);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; &quot;</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(hourText[currentTime.hours]);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; &quot;</span>);
  }
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;  --  &quot;</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(senseData.temp);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;* C &quot;</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(senseData.pressure);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; hPa &quot;</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(senseData.hum);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;% RH &quot;</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isWeatherImproving</span>() == <span class="hljs-literal">true</span>) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;IMPROVING &quot;</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;GETTING WORSE &quot;</span>);
  }
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>();
}

<span class="hljs-function"><span class="hljs-type">uint8_t</span> <span class="hljs-title">readTime</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> input)</span> </span>{ <span class="hljs-comment">//makes time human readable (0-60 and 0-24)</span>
  <span class="hljs-keyword">return</span> ((input / <span class="hljs-number">16</span> * <span class="hljs-number">10</span>) + (input % <span class="hljs-number">16</span>));
}
</code></pre><h3>Remote Sensor Code</h3><pre><code class="hljs language-arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;SPI.h&gt;</span> <span class="hljs-comment">// for interfacing with the data sensor</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nRF24L01.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;printf.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;RF24.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;RF24_config.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> SENSORSS 10</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SENSORSPEED 500000</span>

<span class="hljs-function">RF24 <span class="hljs-title">radio</span><span class="hljs-params">(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>)</span></span>;
<span class="hljs-type">uint8_t</span> addresses[][<span class="hljs-number">6</span>] = {<span class="hljs-string">&quot;3g8wM&quot;</span>, <span class="hljs-string">&quot;0Us9x&quot;</span>};
<span class="hljs-type">int32_t</span> currentTemp;

<span class="hljs-keyword">struct</span> <span class="hljs-title hljs-class">SCOMP</span> {
  <span class="hljs-type">uint16_t</span> T1;
  <span class="hljs-type">int16_t</span> T2;
  <span class="hljs-type">int16_t</span> T3;
  <span class="hljs-type">uint16_t</span> P1;
  <span class="hljs-type">int16_t</span> P2;
  <span class="hljs-type">uint16_t</span> P3;
  <span class="hljs-type">uint16_t</span> P4;
  <span class="hljs-type">int16_t</span> P5;
  <span class="hljs-type">int16_t</span> P6;
  <span class="hljs-type">uint16_t</span> P7;
  <span class="hljs-type">int16_t</span> P8;
  <span class="hljs-type">uint16_t</span> P9;
  <span class="hljs-type">uint8_t</span> H1;
  <span class="hljs-type">int16_t</span> H2;
  <span class="hljs-type">uint8_t</span> H3;
  <span class="hljs-type">int16_t</span> H4;
  <span class="hljs-type">int16_t</span> H5;
  <span class="hljs-type">int8_t</span> H6;
};
<span class="hljs-keyword">struct</span> <span class="hljs-title hljs-class">RAWDATA</span> {
  <span class="hljs-type">uint32_t</span> uPress;
  <span class="hljs-type">uint32_t</span> uTemp;
  <span class="hljs-type">uint32_t</span> uHum;
};

RAWDATA rawRead;
SCOMP compData;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">pinMode</span>(SENSORSS, <span class="hljs-literal">OUTPUT</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);

  radio.<span class="hljs-built_in">begin</span>();
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">begin</span>();

  ACSR = B10000000;
  ADCSRA = ADCSRA &amp; B01111111;
  DIDR0 = DIDR0 | B00111111;

  radio.<span class="hljs-built_in">setPALevel</span>(RF24_PA_MAX);
  radio.<span class="hljs-built_in">setChannel</span>(<span class="hljs-number">99</span>);
  radio.<span class="hljs-built_in">openWritingPipe</span>(addresses[<span class="hljs-number">0</span>]);

  <span class="hljs-built_in">sensorConfig</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">getRawData</span>();
  <span class="hljs-built_in">transmit</span>(<span class="hljs-built_in">temp</span>(rawRead.uTemp), <span class="hljs-built_in">pressure</span>(rawRead.uPress), <span class="hljs-built_in">humidity</span>(rawRead.uHum));
  <span class="hljs-built_in">deepSleep</span>();
}

<span class="hljs-function"><span class="hljs-type">int8_t</span> <span class="hljs-title">temp</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> inTemp)</span> </span>{<span class="hljs-comment">//returns temp in degrees celcius int8_t</span>
  <span class="hljs-type">int32_t</span> var1, var2;
  var1 = ((((inTemp &gt;&gt; <span class="hljs-number">3</span>) - ((<span class="hljs-type">int32_t</span>)compData.T1 &lt;&lt; <span class="hljs-number">1</span>))) * ((<span class="hljs-type">int32_t</span>)compData.T2)) &gt;&gt; <span class="hljs-number">11</span>;
  var2 = (((((inTemp &gt;&gt; <span class="hljs-number">4</span>) - ((<span class="hljs-type">int32_t</span>)compData.T1)) * ((inTemp &gt;&gt; <span class="hljs-number">4</span>) - ((<span class="hljs-type">int32_t</span>)compData.T1))) &gt;&gt; <span class="hljs-number">12</span>) * ((<span class="hljs-type">int32_t</span>)compData.T3)) &gt;&gt; <span class="hljs-number">14</span>;
  currentTemp = var1 + var2;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">round</span>(((currentTemp * <span class="hljs-number">5</span> + <span class="hljs-number">128</span>) &gt;&gt; <span class="hljs-number">8</span>) / <span class="hljs-number">100.00</span>);
}

<span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">pressure</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> inPress)</span> </span>{<span class="hljs-comment">//returns pressure in int_32</span>
  <span class="hljs-built_in">temp</span>(rawRead.uTemp);
  <span class="hljs-type">int64_t</span> var1, var2, p;
  var1 = ((<span class="hljs-type">int64_t</span>)currentTemp) - <span class="hljs-number">128000</span>;
  var2 = var1 * var1 * (<span class="hljs-type">int64_t</span>)compData.P6;
  var2 = var2 + ((var1 * (<span class="hljs-type">int64_t</span>)compData.P5) &lt;&lt; <span class="hljs-number">17</span>);
  var2 = var2 + (((<span class="hljs-type">int64_t</span>)compData.P4) &lt;&lt; <span class="hljs-number">35</span>);
  var1 = ((var1 * var1 * (<span class="hljs-type">int64_t</span>)compData.P3) &gt;&gt; <span class="hljs-number">8</span>) + ((var1 * (<span class="hljs-type">int64_t</span>)compData.P2) &lt;&lt; <span class="hljs-number">12</span>);
  var1 = (((((<span class="hljs-type">int64_t</span>)<span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">47</span>) + var1)) * ((<span class="hljs-type">int64_t</span>)compData.P1) &gt;&gt; <span class="hljs-number">33</span>;

  <span class="hljs-keyword">if</span> (var1 == <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> (<span class="hljs-type">uint32_t</span>)<span class="hljs-number">0</span>; <span class="hljs-comment">// avoid exception caused by division by zero</span>
  }

  p = <span class="hljs-number">1048576</span> - inPress;
  p = (((p &lt;&lt; <span class="hljs-number">31</span>) - var2) * <span class="hljs-number">3125</span>) / var1;
  var1 = (((<span class="hljs-type">int64_t</span>)compData.P9) * (p &gt;&gt; <span class="hljs-number">13</span>) * (p &gt;&gt; <span class="hljs-number">13</span>)) &gt;&gt; <span class="hljs-number">25</span>;
  var2 = (((<span class="hljs-type">int64_t</span>)compData.P8) * p) &gt;&gt; <span class="hljs-number">19</span>;
  p = ((p + var1 + var2) &gt;&gt; <span class="hljs-number">8</span>) + (((<span class="hljs-type">int64_t</span>)compData.P7) &lt;&lt; <span class="hljs-number">4</span>);
  <span class="hljs-keyword">return</span> (<span class="hljs-type">uint32_t</span>)p;
}

<span class="hljs-function"><span class="hljs-type">uint8_t</span> <span class="hljs-title">humidity</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> inHum)</span> </span>{<span class="hljs-comment">//returns percent relative humidity int8_t</span>
  <span class="hljs-type">int32_t</span> v1;
  v1 = (currentTemp - ((<span class="hljs-type">int32_t</span>)<span class="hljs-number">76800</span>));
  v1 = (((((inHum &lt;&lt; <span class="hljs-number">14</span>) - (((<span class="hljs-type">int32_t</span>)compData.H4) &lt;&lt; <span class="hljs-number">20</span>) - (((<span class="hljs-type">int32_t</span>)compData.H5) * v1)) + ((<span class="hljs-type">int32_t</span>)<span class="hljs-number">16384</span>)) &gt;&gt; <span class="hljs-number">15</span>) * (((((((v1 * ((<span class="hljs-type">int32_t</span>)compData.H6)) &gt;&gt; <span class="hljs-number">10</span>) * (((v1 * ((<span class="hljs-type">int32_t</span>)compData.H3)) &gt;&gt; <span class="hljs-number">11</span>) + ((<span class="hljs-type">int32_t</span>)<span class="hljs-number">32768</span>))) &gt;&gt; <span class="hljs-number">10</span>) + ((<span class="hljs-type">int32_t</span>)<span class="hljs-number">2097152</span>)) * ((<span class="hljs-type">int32_t</span>)compData.H2) + <span class="hljs-number">8192</span>) &gt;&gt; <span class="hljs-number">14</span>));
  v1 = (v1 - (((((v1 &gt;&gt; <span class="hljs-number">15</span>) * (v1 &gt;&gt; <span class="hljs-number">15</span>)) &gt;&gt; <span class="hljs-number">7</span>) * ((<span class="hljs-type">int32_t</span>)compData.H1)) &gt;&gt; <span class="hljs-number">4</span>));
  v1 = (v1 &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">0</span> : v1;
  v1 = (v1 &gt; <span class="hljs-number">419430400</span>) ? <span class="hljs-number">419430400</span> : v1;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">round</span>((v1 &gt;&gt; <span class="hljs-number">12</span>) / <span class="hljs-number">1024.00</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sensorConfig</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">beginTransaction</span>(<span class="hljs-built_in">SPISettings</span>(SENSORSPEED, MSBFIRST, SPI_MODE0));
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x60</span>);<span class="hljs-comment">//initiate write to reset register</span>
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xB6</span>);<span class="hljs-comment">//performs soft reset</span>
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">25</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">endTransaction</span>();
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">beginTransaction</span>(<span class="hljs-built_in">SPISettings</span>(SENSORSPEED, MSBFIRST, SPI_MODE0));
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x75</span>);<span class="hljs-comment">//initiate write to config</span>
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x04</span>);<span class="hljs-comment">//0.5ms delay, filter x2</span>
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x72</span>);<span class="hljs-comment">//initiate write to ctrl_hum</span>
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x01</span>);<span class="hljs-comment">//set filtering to 1x</span>
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x74</span>);<span class="hljs-comment">//initiate write to ctrl_meas</span>
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xB7</span>);<span class="hljs-comment">//normal mode</span>
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">endTransaction</span>();
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">25</span>);
  <span class="hljs-built_in">getCompensationData</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getRawData</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">beginTransaction</span>(<span class="hljs-built_in">SPISettings</span>(SENSORSPEED, MSBFIRST, SPI_MODE0));
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xF7</span>);
  <span class="hljs-comment">//pressure</span>
  rawRead.uPress = <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uPress &lt;&lt;= <span class="hljs-number">8</span>;
  rawRead.uPress |= <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uPress &lt;&lt;= <span class="hljs-number">8</span>;
  rawRead.uPress |= <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uPress &gt;&gt;= <span class="hljs-number">4</span>;
  <span class="hljs-comment">//temperature</span>
  rawRead.uTemp = <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uTemp &lt;&lt;= <span class="hljs-number">8</span>;
  rawRead.uTemp |= <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uTemp &lt;&lt;= <span class="hljs-number">8</span>;
  rawRead.uTemp |= <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uTemp &gt;&gt;= <span class="hljs-number">4</span>;
  <span class="hljs-comment">//humidity</span>
  rawRead.uHum = <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  rawRead.uHum &lt;&lt;= <span class="hljs-number">8</span>;
  rawRead.uHum |= <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">endTransaction</span>();
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">transmit</span><span class="hljs-params">(<span class="hljs-type">int8_t</span> tempD, <span class="hljs-type">uint32_t</span> pressD, <span class="hljs-type">uint8_t</span> humD)</span> </span>{ <span class="hljs-comment">//sends data to the main clock</span>
  <span class="hljs-type">uint64_t</span> transmissionData;
  transmissionData = tempD;
  transmissionData &lt;&lt;= <span class="hljs-number">32</span>;
  transmissionData |= pressD;
  transmissionData &lt;&lt;= <span class="hljs-number">8</span>;
  transmissionData |= humD;

  radio.<span class="hljs-built_in">powerUp</span>();
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">6</span>);
  radio.<span class="hljs-built_in">write</span>(&amp;transmissionData, <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">uint64_t</span>));
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">wakeSensor</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">beginTransaction</span>(<span class="hljs-built_in">SPISettings</span>(SENSORSPEED, MSBFIRST, SPI_MODE0));
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x74</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xB7</span>);
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">30</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">endTransaction</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sensorSleep</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">beginTransaction</span>(<span class="hljs-built_in">SPISettings</span>(SENSORSPEED, MSBFIRST, SPI_MODE0));
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x74</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xB4</span>);
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">30</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">endTransaction</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deepSleep</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">//powers down peripherals and ATmega328</span>
  <span class="hljs-built_in">sensorSleep</span>();
  radio.<span class="hljs-built_in">powerDown</span>();
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">20000</span>);
  <span class="hljs-built_in">wakeSensor</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getCompensationData</span><span class="hljs-params">()</span> </span>{<span class="hljs-comment">//populates compData struct</span>
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">beginTransaction</span>(<span class="hljs-built_in">SPISettings</span>(SENSORSPEED, MSBFIRST, SPI_MODE0));
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x88</span>);
  <span class="hljs-comment">//Temperature</span>
  compData.T1 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.T1 = (compData.T1 &gt;&gt; <span class="hljs-number">8</span> | compData.T1 &lt;&lt; <span class="hljs-number">8</span>);
  compData.T2 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.T2 = (compData.T2 &gt;&gt; <span class="hljs-number">8</span> | compData.T2 &lt;&lt; <span class="hljs-number">8</span>);
  compData.T3 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.T3 = (compData.T3 &gt;&gt; <span class="hljs-number">8</span> | compData.T3 &lt;&lt; <span class="hljs-number">8</span>);
  <span class="hljs-comment">//Pressure</span>
  compData.P1 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P1 = (compData.P1 &gt;&gt; <span class="hljs-number">8</span> | compData.P1 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P2 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P2 = (compData.P2 &gt;&gt; <span class="hljs-number">8</span> | compData.P2 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P3 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P3 = (compData.P3 &gt;&gt; <span class="hljs-number">8</span> | compData.P3 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P4 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P4 = (compData.P4 &gt;&gt; <span class="hljs-number">8</span> | compData.P4 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P5 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P5 = (compData.P5 &gt;&gt; <span class="hljs-number">8</span> | compData.P5 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P6 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P6 = (compData.P6 &gt;&gt; <span class="hljs-number">8</span> | compData.P6 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P7 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P7 = (compData.P7 &gt;&gt; <span class="hljs-number">8</span> | compData.P7 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P8 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P8 = (compData.P8 &gt;&gt; <span class="hljs-number">8</span> | compData.P8 &lt;&lt; <span class="hljs-number">8</span>);
  compData.P9 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.P9 = (compData.P9 &gt;&gt; <span class="hljs-number">8</span> | compData.P9 &lt;&lt; <span class="hljs-number">8</span>);
  <span class="hljs-comment">//Humidity</span>
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xA1</span>);
  compData.H1 = <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xE1</span>);
  compData.H2 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>));
  compData.H2 = (compData.H2 &gt;&gt; <span class="hljs-number">8</span> | compData.H2 &lt;&lt; <span class="hljs-number">8</span>);
  compData.H3 = <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  compData.H4 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">4</span>) | (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &amp; <span class="hljs-number">0xF</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">LOW</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0xE5</span>);
  compData.H5 = (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &gt;&gt; <span class="hljs-number">4</span>) | (<span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>) &lt;&lt; <span class="hljs-number">4</span>);
  compData.H6 = <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">transfer</span>(<span class="hljs-number">0x00</span>);
  <span class="hljs-built_in">digitalWrite</span>(SENSORSS, <span class="hljs-literal">HIGH</span>);
  <span class="hljs-built_in">SPI</span>.<span class="hljs-built_in">endTransaction</span>();
}
</code></pre><h2>Conclusion</h2><p>In conclusion, this project was unsuccessful; however, it can be easily completed given the correct, fully operational, parts. I did enjoy working with ViaCAD to create a clean, accurate final product, and while it may not work as intended, it does look quite nice. This project taught me to <em>always</em> test your components before you leave the lab for a long weekend. While I am wholeheartedly disappointed with the results this far, I am optimistic that I can get this project to achieve its intended purpose. While it was quite difficult, I enjoyed working with only the SPI library to communicate with the BME280 chip as it taught me more about the SPI protocol, how data is stored in peripherals, and how to read (and find issues with) datasheets. I have alerted Bosch of the issue with their datasheet and they have yet alerted me of a change. From the issue with the NeoPixels, I learned how to think quickly and produce a final project with some resemblance to the intended final product. I hope to bring what I learned about communication protocols, sensors, data compensation algorithms and limitations of certain products with me for utilization in future projects.</p><h2>Reference</h2><p>&quot;BME280.&quot; Bosch Sensortec, Bosch, 26 Oct. 2015, <a href="http://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME280_DS001-11.pdf">http://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME280_DS001-11.pdf</a>. Accessed 22 May 2017.</p><p>Burgess, Phillip. &quot;Adafruit NeoPixel Überguide.&quot; Adafruit NeoPixel Überguide, Adafruit, 30 Aug. 2013, <a href="http://learn.adafruit.com/adafruit-neopixel-uberguide/overview">http://learn.adafruit.com/adafruit-neopixel-uberguide/overview</a>. Accessed 22 May 2017.</p></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Medium ISP: Word Clock and Weather Predictor","name":"2017-05-22-Medium-ISP","content":{"compiledSource":"var N=Object.defineProperty,o=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var r=(e,s,n)=\u003es in e?N(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(e,s)=\u003e{for(var n in s||(s={}))l.call(s,n)\u0026\u0026r(e,n,s[n]);if(t)for(var n of t(s))m.call(s,n)\u0026\u0026r(e,n,s[n]);return e},c=(e,s)=\u003eo(e,h(s));var i=(e,s)=\u003e{var n={};for(var p in e)l.call(e,p)\u0026\u0026s.indexOf(p)\u003c0\u0026\u0026(n[p]=e[p]);if(e!=null\u0026\u0026t)for(var p of t(e))s.indexOf(p)\u003c0\u0026\u0026m.call(e,p)\u0026\u0026(n[p]=e[p]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var p=n,{components:e}=p,s=i(p,[\"components\"]);return mdx(MDXLayout,c(a(a({},layoutProps),s),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"Purpose\"),mdx(\"p\",null,'The purpose of this project is to create a clock capable of showing the current time, temperature, humidity and short-term forecast in a clean, sleek way. The clock is to read the time off of an Real Time Clock (RTC) IC, read air pressure, humidity and temperature wirelessly from a separate device, and display everything in an easy to understand way. To display the time, words for each five minute interval and each hour are to illuminate. To display the current temperature and relative humidity percentage (%RH), the first ten columns are to light up and show the required digits, similar to a 7-segment display. A \"C\" and a \"%\" sign will also illuminate for temperature and %RH respectively. The weather sensor is to be separate from the clock and communicate with the main clock via a NRF24L01+ wireless communication IC.'),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",a({parentName:\"tr\"},{align:null}),\"Parts List\"),mdx(\"th\",a({parentName:\"tr\"},{align:null})))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"2\\xD7 Arduino Uno\"),mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"2\\xD7 NRF24L01+ Wireless Chip\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"93\\xD7 Red-Green BiColour LEDs\"),mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"4'\\xD72' Medium Density Fibreboard (MDF)\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"Clear Acrylic Sheet\"),mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"Piano Black Plastic Sheet\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"BME280 I2C or SPI Temperature Humidity Pressure Sensor\"),mdx(\"td\",a({parentName:\"tr\"},{align:null}),\"DS1307 I2C Real Time Clock\")))),mdx(\"h2\",null,\"Procedure\"),mdx(\"img\",{style:{float:\"right\"},src:\"/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/chrome_2017-05-22_14-23-26.png\"}),'This project begins with designing the main clock face. It is paramount that the clock face contains all the necessary words to display any five minute interval of time. This step also requires careful planning of the order that words will appear to ensure readability (top to bottom, left to right) and that there is adequate spacing between each word. Each line must also have the same number of characters, and the \"C\" and \"%\" characters must be present only in the far-right column. Creation of the design initially began in a text file, and was then transferred to a table in a word document to add colour. Creation of the final design required using a CAD program, in this case ViaCAD 3D, to ensure proper spacing of characters. Mr. Elia helped greatly with this. The final step in designing the clock face was sending the design files off to be laser cut in acrylic and plastic. Assembly began when the laser cut pieces arrived. Gluing the characters  into place meant ensuring that the block shape of each was clear acrylic, and the inner \"floating\" parts of the characters were the same black plastic as the rest of the clock face. This allowed for avoiding a stencil font while still maintaining readability.',mdx(\"p\",null,\"Creating the wireless weather sensor was the next step. This began with reading the datasheet to understand where to find data on the IC and how to access it using Serial Peripheral Interface (SPI). Pictured on the previous page is the pinout for the BME280 sensor. It is a surface mount device.\"),mdx(\"p\",null,\"SPI works similar to serial communication, but with the added benefit of the slave device (in this case the BME280 sensor) being able to contact the master device as well (in this case the Arduino Uno). Unlike I2C, it requires 4 pins. See Wireless Communication: Temperature Data Logging for more information on Serial Communication. SPI is the chosen protocol in this case because it means using only one communication protocol to interact with the wireless transmitter and the weather sensor.\"),mdx(\"p\",null,\"Configuring the BME280 chip is important so that that reports the values as desired. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"sensorConfig() \"),\" function configures the sensor by performing a reset, identifying how often the sensor is to record information, and how sensitive the sensor should be to sudden changes in values. It also initiates \",mdx(\"inlineCode\",{parentName:\"p\"},\"getCompensationData()\"),\".\"),mdx(\"p\",null,'The data from the BME280 chip requires processing before it can accurately display the time. This is because each individual chip has different sensitivities to the environment. The manufacturer, Bosch, solves this problem by storing \"compensation data\" in specific registers on the chip. The ',mdx(\"inlineCode\",{parentName:\"p\"},\"getCompensationData()\"),\" function in the Remote Sensor code obtains this data. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"getCompensationData()\"),\" function is only called once as the compensation data never changes. A special \",mdx(\"inlineCode\",{parentName:\"p\"},\"struct\"),\" called \",mdx(\"inlineCode\",{parentName:\"p\"},\"compData\"),' stores this data because some values have different lengths, some are \"signed\" and some are \"unsigned\". This was problematic as the datasheet provided incorrect information on which characters were signed or unsigned. by comparing the individual compensation data readouts to those of the Adafruit library, it was easy to deduce which were incorrect.'),mdx(\"p\",null,\"Signed characters use format called \",mdx(\"em\",{parentName:\"p\"},\"Two's Compliment\"),` to store their values. Using an 8-bit byte as an example, two's compliment has the ability to store a value ranging from -128 to 127 inclusive. Two's compliment works by accepting a positive integer from 0-128, then performing a bitwise \"NOT\", and adding 1. This value now represents a negative integer. The computer can tell that the value is negative, because the most significant bit of binary integer is a \"1\". For more information on bitwise, see the BiColour LED Matrix project.`),mdx(\"p\",null,'Recording the uncompensated, or \"raw\", data from the sensor happens after reading the compensation data. The ',mdx(\"inlineCode\",{parentName:\"p\"},\"getRawData()\"),\" function obtains said data and stores it in a \",mdx(\"inlineCode\",{parentName:\"p\"},\"struct\"),\" called \",mdx(\"inlineCode\",{parentName:\"p\"},\"rawData\"),\". This data is then run through specific algorithms defined in the datasheet, which use the compensation data recorded earlier, to get the temperature in degrees Celsius, the pressure in Pascals, and the relative humidity percentage. These algorithms are \",mdx(\"inlineCode\",{parentName:\"p\"},\"temp()\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"pressure()\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"humidity()\"),\" for temperature, pressure and humidity respectively. Each returns a value of specific size for easy formatting and transmission using the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transmit()\"),\" function.\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"transmit()\"),\" function compacts the temperature, pressure and humidity data into one unsigned, 64-bit integer, and transmits it wirelessly via the NRF24L01+. The program then uses the \",mdx(\"inlineCode\",{parentName:\"p\"},\"deepSleep()\"),\" function to enter the peripherals into low power mode, wait, and then turn the sensor back on. This function uses SPI to write to a specific register on the BME280 sensor requesting that it enter sleep mode.\"),mdx(\"p\",null,\"The clock code first uses I2C to intercept the current hour and minute from the DS1307 RTC. This code is works almost identically to that used in the Nixie Tube Clock project. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"updateTime()\"),\" function obtains this time and stores it in a \",mdx(\"inlineCode\",{parentName:\"p\"},\"struct\"),\" called \",mdx(\"inlineCode\",{parentName:\"p\"},\"currentTime\"),\" for easy access. This function also converts the 24-hour time stored on the RTC into 12-hour time for the clock to display.\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"receive()\"),\" function then looks for available data from the remote sensor, formats the recieved 64 bit, unsigned integer into temperature, pressure and humidity again, and then stores it in a \",mdx(\"inlineCode\",{parentName:\"p\"},\"struct\"),\" called \",mdx(\"inlineCode\",{parentName:\"p\"},\"senseData\"),\".\"),mdx(\"p\",null,\"The current time is then formatted into specific words and printed to the serial monitor via the \",mdx(\"inlineCode\",{parentName:\"p\"},\"printTimeAndData()\"),\" function. This function first reads the current minute and maps it to a value from 0-12, inclusive. This value is then used to query the \",mdx(\"inlineCode\",{parentName:\"p\"},\"minuteText[]\"),' array and determine what text to show for the current minute. Next the function determines if the clock should display \"TO\" or \"PAST\" the hour. The clock only switches to \"TO\" after 35 minutes of the current hour have elapsed. The mapped value is again used to determine this. The final step in showing the current time is displaying the appropriate hour in relation to the current time. For this the current hour value minus one (because arrays are zero indexed) index of ',mdx(\"inlineCode\",{parentName:\"p\"},\"thehourText[]\"),' array prints to the serial monitor. If the minutes, however, are greater than 35, the clock must display the future hour as the clock will now show \"TO\" instead of \"PAST\". As such the index of the current hour is directly indexed into the ',mdx(\"inlineCode\",{parentName:\"p\"},\"hourText[]\"),\" array. Finally the function prints the data intercepted from the remote sensor to the serial monitor. This includes whether or not the weather is improving, or worsening.\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"isWeatherImproving()\"),\" function uses an average of the pressure from each five minute interval over the past hour plus the current pressure and compares it against the oldest pressure reading. If the average is less than the oldest reading, pressure is decreasing  and the weather is getting worse. Otherwise, the weather is improving and the function returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\".\"),mdx(\"p\",null,\"While simple at first, numerous obstacles faced the construction of this clock later on. Cutting the perfectly square back plate of the clock and wooden borders of the face plate was the first step. Gluing the cardstock baffles which ensured no light bleed from neighbouring characters followed. This ensured that the clock would be easy to read. Problems arose in the final steps when planning out a NeoPixel LED matrix for backlighting, as the NeoPixels were non-functional. BiColour Red/Green LEDs replaced the NeoPixels after a last-minute visit to a hardware store. Unfortunately, however, the ATmega328P does not have enough ports to control the 93 LED matrix, and as such, the clock cannot function. Painting the clock and gluing the faceplate in position were the final steps. A possible solution to this problem would be a larger Arduino device to control the entire matrix, or (the better option) to purchase a working strip of NeoPixels.\"),mdx(\"h2\",null,\"Media\"),mdx(\"table\",null,mdx(\"tr\",null,mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0034.jpg\"})),mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0036.jpg\"}))),mdx(\"tr\",null,mdx(\"th\",null,\"Drilling holes for LEDs\"),mdx(\"th\",null,\"Soldering LED matrix\")),mdx(\"tr\",null,mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0031.jpg\"})),mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2011/Medium%20ISP/DSC_0042.jpg\"}))),mdx(\"tr\",null,mdx(\"th\",null,\"Testing Main clock module without matrix\"),mdx(\"th\",null,\"Illuminated Clock Face\")),mdx(\"tr\",null,mdx(\"th\",{colSpan:\"2\"},\"Link to YouTube Video: \",mdx(\"a\",{href:\"https://youtu.be/pIHCYQPU6w8\"},\"https://youtu.be/pIHCYQPU6w8\")))),mdx(\"h2\",null,\"Code\"),mdx(\"h3\",null,\"Main Clock Code\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-arduino\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cWire.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cnRF24L01.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cprintf.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cRF24.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cRF24_config.h\u003e\")),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"define\"),\" RTC_ADDRESS 0x68\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),\"RF24 \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"radio\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-number\"}),\"9\"),\", \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-number\"}),\"10\"),\")\")),`;\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),\" addresses[][\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"6\"),\"] = {\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"3g8wM\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"0Us9x\"'),`};\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint64_t\"),` data;\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"bool\"),` goodWeather;\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"String\"),\" hourText[] = {\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"ONE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TWO\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"THREE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"FOUR\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"FIVE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"SIX\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"SEVEN\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"EIGHT\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"NINE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TEN\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"ELEVEN\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TWELVE\"'),`};\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"String\"),\" minuteText[] = {\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"FIVE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TEN\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"A QUARTER\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TWENTY\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TWENTY FIVE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"A HALF\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TWENTY FIVE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TWENTY\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"A QUARTER\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"TEN\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"FIVE\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"\"'),`};\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),\" pressureAverage[\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"13\"),`];\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),` durationThroughHour;\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"struct\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"SENSORDATA\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int8_t\"),` temp;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"float\"),` pressure;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),` hum;\n};\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"struct\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"CURRENT_TIME\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),` hours;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),` minutes;\n};\n\nSENSORDATA senseData;\nCURRENT_TIME currentTime;\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"setup\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"begin\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"9600\"),`);\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"begin\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"begin\"),`();\n\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"setChannel\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"99\"),`);\n\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"openReadingPipe\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\", addresses[\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`]);\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"startListening\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"loop\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"updateTime\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"receive\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"printTimeAndData\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"receive\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (radio.\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"available\"),`()) {\n    radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"read\"),\"(\u0026data, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"sizeof\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint64_t\"),`));\n    senseData.temp = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int8_t\"),\")(data \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"40\"),`);\n    senseData.pressure = ((data \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\") \u0026 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xFFFFFFFF\"),\") / \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"25600.00\"),`;\n    senseData.hum = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),\")data \u0026 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xFF\"),`;\n    pressureAverage[durationThroughHour] = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),`)senseData.pressure;\n  }\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"updateTime\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransmission\"),`(RTC_ADDRESS);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"write\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"); \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//prepare rtc to be read from\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransmission\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"requestFrom\"),\"(RTC_ADDRESS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"7\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"while\"),\" (!\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"available\"),`());\n  currentTime.minutes =  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"readTime\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"read\"),\"() \u0026 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x7f\"),\"); \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//minute\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),\" hours = \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"readTime\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Wire\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"read\"),\"() \u0026 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x3f\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (hours \u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),`) {\n    hours = hours - `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),`;\n  }\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (hours == \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`) {\n    hours == `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),`;\n  }\n  currentTime.hours = hours;\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"bool\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"isWeatherImproving\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),` pressureSum;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"for\"),\" (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),\" ii; ii \u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"13\"),`; ii++) {\n    pressureSum += pressureAverage[ii];\n  }\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (pressureSum / \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"13\"),\" \u003e (pressureAverage[\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),` - durationThroughHour])) {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"false\"),`;\n  } `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"true\"),`;\n  }\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"printTimeAndData\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"It is \"'),`);\n  durationThroughHour = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"map\"),\"(currentTime.minutes, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"60\"),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),`(minuteText[durationThroughHour]);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (durationThroughHour != \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`) {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (durationThroughHour \u003c= \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"6\"),`) {\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\" PAST \"'),`);\n    } `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\" TO \"'),`);\n    }\n  }\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (currentTime.minutes \u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"35\"),`) {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(hourText[currentTime.hours - \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`]);\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\" \"'),`);\n  } `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),`(hourText[currentTime.hours]);\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\" \"'),`);\n  }\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"  --  \"'),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),`(senseData.temp);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"* C \"'),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),`(senseData.pressure);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\" hPa \"'),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),`(senseData.hum);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"% RH \"'),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"isWeatherImproving\"),\"() == \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"true\"),`) {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"IMPROVING \"'),`);\n  } `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"print\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"GETTING WORSE \"'),`);\n  }\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"Serial\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"println\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"uint8_t\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"readTime\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"uint8_t\"),\" input)\"),\" \"),\"{ \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//makes time human readable (0-60 and 0-24)\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" ((input / \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"16\"),\" * \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"10\"),\") + (input % \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"16\"),`));\n}\n`)),mdx(\"h3\",null,\"Remote Sensor Code\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-arduino\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cSPI.h\u003e\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-comment\"}),\"// for interfacing with the data sensor\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cnRF24L01.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cprintf.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cRF24.h\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"include\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-string\"}),\"\u003cRF24_config.h\u003e\")),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"define\"),\" SENSORSS 10\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-keyword\"}),\"define\"),\" SENSORSPEED 500000\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),\"RF24 \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"radio\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-number\"}),\"7\"),\", \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-number\"}),\"8\"),\")\")),`;\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),\" addresses[][\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"6\"),\"] = {\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"3g8wM\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"0Us9x\"'),`};\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),` currentTemp;\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"struct\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"SCOMP\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint16_t\"),` T1;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` T2;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` T3;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint16_t\"),` P1;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` P2;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint16_t\"),` P3;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint16_t\"),` P4;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` P5;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` P6;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint16_t\"),` P7;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` P8;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint16_t\"),` P9;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),` H1;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` H2;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint8_t\"),` H3;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` H4;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int16_t\"),` H5;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int8_t\"),` H6;\n};\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"struct\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"RAWDATA\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),` uPress;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),` uTemp;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),` uHum;\n};\n\nRAWDATA rawRead;\nSCOMP compData;\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"setup\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"pinMode\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"OUTPUT\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"begin\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"begin\"),`();\n\n  ACSR = B10000000;\n  ADCSRA = ADCSRA \u0026 B01111111;\n  DIDR0 = DIDR0 | B00111111;\n\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"setPALevel\"),`(RF24_PA_MAX);\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"setChannel\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"99\"),`);\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"openWritingPipe\"),\"(addresses[\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`]);\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"sensorConfig\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"loop\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"getRawData\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transmit\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"temp\"),\"(rawRead.uTemp), \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"pressure\"),\"(rawRead.uPress), \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"humidity\"),`(rawRead.uHum));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"deepSleep\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"int8_t\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"temp\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"int32_t\"),\" inTemp)\"),\" \"),\"{\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//returns temp in degrees celcius int8_t\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),` var1, var2;\n  var1 = ((((inTemp \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"3\"),\") - ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.T1 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"))) * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.T2)) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"11\"),`;\n  var2 = (((((inTemp \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),\") - ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.T1)) * ((inTemp \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),\") - ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.T1))) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),\") * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.T3)) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"14\"),`;\n  currentTemp = var1 + var2;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"round\"),\"(((currentTemp * \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"5\"),\" + \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"128\"),\") \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\") / \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"100.00\"),`);\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"int32_t\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"pressure\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"int32_t\"),\" inPress)\"),\" \"),\"{\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//returns pressure in int_32\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"temp\"),`(rawRead.uTemp);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),` var1, var2, p;\n  var1 = ((`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")currentTemp) - \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"128000\"),`;\n  var2 = var1 * var1 * (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),`)compData.P6;\n  var2 = var2 + ((var1 * (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P5) \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"17\"),`);\n  var2 = var2 + (((`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P4) \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"35\"),`);\n  var1 = ((var1 * var1 * (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P3) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\") + ((var1 * (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P2) \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),`);\n  var1 = (((((`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"47\"),\") + var1)) * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P1) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"33\"),`;\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (var1 == \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`) {\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),\")\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),\"; \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"// avoid exception caused by division by zero\"),`\n  }\n\n  p = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1048576\"),` - inPress;\n  p = (((p \u003c\u003c `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"31\"),\") - var2) * \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"3125\"),`) / var1;\n  var1 = (((`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P9) * (p \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"13\"),\") * (p \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"13\"),\")) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"25\"),`;\n  var2 = (((`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P8) * p) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"19\"),`;\n  p = ((p + var1 + var2) \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\") + (((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int64_t\"),\")compData.P7) \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint32_t\"),`)p;\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"uint8_t\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"humidity\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"uint32_t\"),\" inHum)\"),\" \"),\"{\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//returns percent relative humidity int8_t\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),` v1;\n  v1 = (currentTemp - ((`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"76800\"),`));\n  v1 = (((((inHum \u003c\u003c `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"14\"),\") - (((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.H4) \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"20\"),\") - (((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.H5) * v1)) + ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"16384\"),\")) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"15\"),\") * (((((((v1 * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.H6)) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"10\"),\") * (((v1 * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.H3)) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"11\"),\") + ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"32768\"),\"))) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"10\"),\") + ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"2097152\"),\")) * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.H2) + \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8192\"),\") \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"14\"),`));\n  v1 = (v1 - (((((v1 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"15\"),\") * (v1 \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"15\"),\")) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"7\"),\") * ((\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"int32_t\"),\")compData.H1)) \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),`));\n  v1 = (v1 \u003c `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),\") ? \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),` : v1;\n  v1 = (v1 \u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"419430400\"),\") ? \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"419430400\"),` : v1;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"round\"),\"((v1 \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),\") / \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1024.00\"),`);\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"sensorConfig\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransaction\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPISettings\"),`(SENSORSPEED, MSBFIRST, SPI_MODE0));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x60\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//initiate write to reset register\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xB6\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//performs soft reset\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"delay\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"25\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransaction\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransaction\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPISettings\"),`(SENSORSPEED, MSBFIRST, SPI_MODE0));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x75\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//initiate write to config\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x04\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//0.5ms delay, filter x2\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x72\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//initiate write to ctrl_hum\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x01\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//set filtering to 1x\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x74\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//initiate write to ctrl_meas\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xB7\"),\");\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//normal mode\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransaction\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"delay\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"25\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"getCompensationData\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"getRawData\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransaction\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPISettings\"),`(SENSORSPEED, MSBFIRST, SPI_MODE0));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xF7\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//pressure\"),`\n  rawRead.uPress = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uPress \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`;\n  rawRead.uPress |= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uPress \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`;\n  rawRead.uPress |= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uPress \u003e\u003e= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),`;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//temperature\"),`\n  rawRead.uTemp = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uTemp \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`;\n  rawRead.uTemp |= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uTemp \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`;\n  rawRead.uTemp |= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uTemp \u003e\u003e= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),`;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//humidity\"),`\n  rawRead.uHum = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  rawRead.uHum \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`;\n  rawRead.uHum |= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransaction\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"transmit\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"int8_t\"),\" tempD, \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"uint32_t\"),\" pressD, \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"uint8_t\"),\" humD)\"),\" \"),\"{ \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//sends data to the main clock\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint64_t\"),` transmissionData;\n  transmissionData = tempD;\n  transmissionData \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"32\"),`;\n  transmissionData |= pressD;\n  transmissionData \u003c\u003c= `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`;\n  transmissionData |= humD;\n\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"powerUp\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"delay\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"6\"),`);\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"write\"),\"(\u0026transmissionData, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"sizeof\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-type\"}),\"uint64_t\"),`));\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"wakeSensor\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransaction\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPISettings\"),`(SENSORSPEED, MSBFIRST, SPI_MODE0));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x74\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xB7\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"delay\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransaction\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"sensorSleep\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransaction\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPISettings\"),`(SENSORSPEED, MSBFIRST, SPI_MODE0));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x74\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xB4\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"delay\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransaction\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"deepSleep\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),\"{ \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//powers down peripherals and ATmega328\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"sensorSleep\"),`();\n  radio.`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"powerDown\"),`();\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"delay\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"20000\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"wakeSensor\"),`();\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-type\"}),\"void\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-title\"}),\"getCompensationData\"),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),\"{\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//populates compData struct\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"beginTransaction\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPISettings\"),`(SENSORSPEED, MSBFIRST, SPI_MODE0));\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x88\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//Temperature\"),`\n  compData.T1 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.T1 = (compData.T1 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.T1 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.T2 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.T2 = (compData.T2 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.T2 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.T3 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.T3 = (compData.T3 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.T3 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//Pressure\"),`\n  compData.P1 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P1 = (compData.P1 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P1 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P2 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P2 = (compData.P2 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P2 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P3 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P3 = (compData.P3 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P3 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P4 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P4 = (compData.P4 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P4 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P5 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P5 = (compData.P5 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P5 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P6 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P6 = (compData.P6 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P6 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P7 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P7 = (compData.P7 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P7 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P8 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P8 = (compData.P8 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P8 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.P9 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.P9 = (compData.P9 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.P9 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"//Humidity\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xA1\"),`);\n  compData.H1 = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xE1\"),`);\n  compData.H2 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`));\n  compData.H2 = (compData.H2 \u003e\u003e `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\" | compData.H2 \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`);\n  compData.H3 = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  compData.H4 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),\") | (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u0026 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xF\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"LOW\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0xE5\"),`);\n  compData.H5 = (`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003e\u003e \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),\") | (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),\") \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),`);\n  compData.H6 = `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"transfer\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x00\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"digitalWrite\"),\"(SENSORSS, \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-literal\"}),\"HIGH\"),`);\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"SPI\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"endTransaction\"),`();\n}\n`)),mdx(\"h2\",null,\"Conclusion\"),mdx(\"p\",null,\"In conclusion, this project was unsuccessful; however, it can be easily completed given the correct, fully operational, parts. I did enjoy working with ViaCAD to create a clean, accurate final product, and while it may not work as intended, it does look quite nice. This project taught me to \",mdx(\"em\",{parentName:\"p\"},\"always\"),\" test your components before you leave the lab for a long weekend. While I am wholeheartedly disappointed with the results this far, I am optimistic that I can get this project to achieve its intended purpose. While it was quite difficult, I enjoyed working with only the SPI library to communicate with the BME280 chip as it taught me more about the SPI protocol, how data is stored in peripherals, and how to read (and find issues with) datasheets. I have alerted Bosch of the issue with their datasheet and they have yet alerted me of a change. From the issue with the NeoPixels, I learned how to think quickly and produce a final project with some resemblance to the intended final product. I hope to bring what I learned about communication protocols, sensors, data compensation algorithms and limitations of certain products with me for utilization in future projects.\"),mdx(\"h2\",null,\"Reference\"),mdx(\"p\",null,'\"BME280.\" Bosch Sensortec, Bosch, 26 Oct. 2015, ',mdx(\"a\",a({parentName:\"p\"},{href:\"http://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME280_DS001-11.pdf\"}),\"http://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME280_DS001-11.pdf\"),\". Accessed 22 May 2017.\"),mdx(\"p\",null,'Burgess, Phillip. \"Adafruit NeoPixel \\xDCberguide.\" Adafruit NeoPixel \\xDCberguide, Adafruit, 30 Aug. 2013, ',mdx(\"a\",a({parentName:\"p\"},{href:\"http://learn.adafruit.com/adafruit-neopixel-uberguide/overview\"}),\"http://learn.adafruit.com/adafruit-neopixel-uberguide/overview\"),\". Accessed 22 May 2017.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}}},"__N_SSG":true},"page":"/blog/[postName]","query":{"postName":"2017-05-22-Medium-ISP"},"buildId":"SFgJJupdZHNk8n2P4HqqA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>