<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Ethan McAuliffe</title><meta name="description" content="My personal website and blog"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/674b4048aafd2ab13367.css" as="style"/><link rel="stylesheet" href="/_next/static/css/674b4048aafd2ab13367.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6d60fbe6f04b36912b39.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6d60fbe6f04b36912b39.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-7a0ed9b54ee413b64c69.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2f2e40eeee33a42dbc14.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5BpostName%5D-16fec599cd3f1ade44b5.js" defer=""></script><script src="/_next/static/bsNE-1v_Y7tPkyWMxuWlg/_buildManifest.js" defer=""></script><script src="/_next/static/bsNE-1v_Y7tPkyWMxuWlg/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Post_container__39vXa"><div class="Post_backButton__2By7j"><a href="/blog">◀ All Posts</a></div><h1>Challenge 2. Rotary Encoder: Gray Code</h1><h2>Purpose</h2><p>The purpose of this project is to take input from the rotary encoder and display its value on three 7-segment displays. The rotary encoder outputs its value in gray code, so it must be converted to a binary value. To display this binary value, it must be converted to a binary-coded-decimal (BCD). Transistors must be used to cycle through the 7-segment displays in order to give the appearance of every display being on at once.</p><table><thead><tr><th>Parts List</th><th></th></tr></thead><tbody><tr><td>4-Bit Gray-Code Rotary Encoder</td><td>3× 7-Segment Display</td></tr><tr><td>CD4511BE BCD to 7-Segment Display IC</td><td>4× 1MΩ Resistor</td></tr><tr><td>3× 3904 NPN Transistor</td><td>3× 1kΩ Resistor</td></tr><tr><td>Arduino Uno</td><td></td></tr></tbody></table><h2>Procedure</h2><p>This challenge started by wiring the rotary encoder to an existing 7-segment BCD display circuit. The initial circuit consisted of a 4511 IC connected to three 7-segment displays. The displays achieved persistence of vision (POV) by toggling the ground connection through the use of NPN transistors. The wiring of the rotary encoder is nearly the same as that in Challenge 1 Rotary Switch Monitor.</p><p>The real difference is in the output from the rotary encoder. Instead of returning a binary number according to the position of the rotor, the encoder used here returns a &quot;Gray code&quot; value. Gray code is very different from binary. Instead of being a &quot;weighted&quot; number system, wherein a change in a specific digit always has the same affect on a number, Gray code is unweighted. This makes it a code instead of a number system. The key feature of Gray code is that between each number only one bit changes value. When using binary, multiple bits often change from a 1 to a 0 while incrementing or decrementing number value. This reduces ambiguity between number states and, in extreme cases, can reduce wear on memory. At right is the bottom view of Gray code rotary encoder, with white squares being zeros and black squares representing ones.</p><a href="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/rotaryEncoderGraphic.png"><img src="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/rotaryEncoderGraphic.png"/></a><p>The code does the brunt of the work in this challenge. The code consists of three main parts. First, the program takes input from the rotary encoder attached to <code>PORTD</code> and converts the Gray code to a binary value. Next, the code converts this to a BCD value on <code>r17</code> and <code>r18</code>. Finally the program displays these values on the 7-segment displays using POV. The code then loops to constantly poll the input states of the rotary encoder. 
In the first step of the input portion, the <code>collect</code> function stores the input state of <code>PORTD</code> to a register. It then shifts this register right, as the zero pin of <code>PORTD</code> does not have input, and the first input is instead on pin one. To convert the Gray code to binary, the <code>convert</code> function adds the binary value of the gray code input to the value of the x register and stores this in the z register. Next it queries the value stored at this position in memory. Here it returns a binary value equivalent to the Gray code. This is because the register stores the binary conversion of the Gray code at the index of the direct binary value of the gray code. For example, while Gray code <code>0b0011</code> is a two, the direct binary value is three.</p><p>Next, the program converts the binary value to a BCD. Beginning at the <code>loop</code> label, the program shifts the input value left through the output registers, carrying the dropped value into each consecutive register. Here the <code>iterate</code> register decrements, as the algorithm must know whether or not the input number is fully converted or not. Next the program checks if the low bit of the first register is greater than or equal to three. The value of this register increases by three if this condition is true. The <code>tens</code> label repeats this step for the high bit of the first register. Instead, however, it checks if the register has a value greater than 80 (0x50) and adds 48 (0x30) if this condition is true. Again, this step repeats under the <code>hundreds</code> label, checking the low bit of the second register and adding three accordingly. Here it jumps back to the <code>loop</code> label. The input value is fully converted to BCD when the <code>iterate</code> register reaches zero.</p><p>In the final part, the <code>pov</code> function takes the registers storing the BCD value and outputs the according number to the 4511 BCD to 7-segment display chip. The hundreds register displays first, with output on <code>PORTC</code>. Next, the base pin of the according transistor activates by setting <code>PORTB</code>. After displaying the hundreds digit, the tens digit is displayed by swapping the nibbles of the first register (<code>r17</code>), and repeating the steps for the hundreds register. The transistor select register shifts by one to enable the tens display and disable the hundreds display. Next, <code>r17</code> swaps nibbles again and the above steps repeat, but for the ones digit. In the final step, the program jumps to the beginning of the program and the process repeats.</p><h2>Media</h2><table><tr><td><a href="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/challenge2_bb.png"><img src="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/challenge2_bb.png"/></a></td><td><a href="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180116_161909.jpg"><img src="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180116_161909.jpg"/></a></td></tr><tr><th>Fritzing diagram</th><th>Circuit overview</th></tr><tr><td><a href="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180120_161226.jpg"><img src="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180120_161226.jpg"/></a></td><td><a href="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180120_161906.jpg"><img src="/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180120_161906.jpg"/></a></td></tr><tr><th>Proper operation showing output 14</th><th>Bottom of rotary encoder</th></tr><tr><th colSpan="2">Link to YouTube Video: <a href="https://youtu.be/K7AFz38Lux8">https://youtu.be/K7AFz38Lux8</a></th></tr></table><h2>Code</h2><pre><code class="hljs language-avrasm"><span class="hljs-comment">; GrayCodeChallenge.asm</span>
<span class="hljs-comment">;</span>
<span class="hljs-comment">; Created: 2018-01-15 8:57:57 AM</span>
<span class="hljs-comment">; Author : Ethan McAuliffe</span>
<span class="hljs-meta">.def</span>    iterate = <span class="hljs-built_in">r24</span>
<span class="hljs-meta">.def</span>    temp  = <span class="hljs-built_in">r25</span>
<span class="hljs-meta">.def</span>    three = <span class="hljs-built_in">r23</span>
<span class="hljs-meta">.def</span>    threeTens = <span class="hljs-built_in">r22</span>

<span class="hljs-meta">.cseg</span>

<span class="hljs-meta">.org</span> <span class="hljs-number">0x0000</span>
   <span class="hljs-keyword">rjmp</span>  reset
<span class="hljs-comment">;segment table format: ;gfab_cde.</span>

<span class="hljs-meta">.org</span> <span class="hljs-number">0x0010</span>
<span class="hljs-symbol">grayStart:</span>
  <span class="hljs-meta">.DB</span>   <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">15</span>,<span class="hljs-number">14</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>,<span class="hljs-number">10</span>
<span class="hljs-symbol">grayEnd:</span>

<span class="hljs-symbol">reset:</span>
    <span class="hljs-keyword">ldi</span>   <span class="hljs-built_in">r16</span>, low(RAMEND)      <span class="hljs-comment">;ALL assembly code should start by</span>
    <span class="hljs-keyword">out</span>   <span class="hljs-built_in">spl</span>,<span class="hljs-built_in">r16</span>                     <span class="hljs-comment">; setting the Stack Pointer to</span>
    <span class="hljs-keyword">ldi</span>   <span class="hljs-built_in">r16</span>, high(RAMEND)     <span class="hljs-comment">; the end of SRAM to support</span>
    <span class="hljs-keyword">out</span>   <span class="hljs-built_in">sph</span>,<span class="hljs-built_in">r16</span>                     <span class="hljs-comment">; function calls, etc.</span>
    <span class="hljs-keyword">ldi</span>   <span class="hljs-built_in">xl</span>,low(grayStart&lt;&lt;<span class="hljs-number">1</span>)  <span class="hljs-comment">;position X and Y pointers to the</span>
    <span class="hljs-keyword">ldi</span>   <span class="hljs-built_in">xh</span>,high(grayStart&lt;&lt;<span class="hljs-number">1</span>) <span class="hljs-comment">;start and end addresses of</span>
    <span class="hljs-keyword">ldi</span>   <span class="hljs-built_in">yl</span>,low(grayEnd&lt;&lt;<span class="hljs-number">1</span>)   <span class="hljs-comment">; our data table, respectively</span>
    <span class="hljs-keyword">ldi</span>   <span class="hljs-built_in">yh</span>,high(grayEnd&lt;&lt;<span class="hljs-number">1</span>)
    <span class="hljs-keyword">movw</span>  <span class="hljs-built_in">z</span>,<span class="hljs-built_in">x</span>                    <span class="hljs-comment">;start Z pointer off at the start address of the table.</span>

    <span class="hljs-keyword">ldi</span> <span class="hljs-built_in">r16</span>,<span class="hljs-number">0x1E</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">DDRD</span>,<span class="hljs-built_in">r16</span>            
    <span class="hljs-keyword">ldi</span> <span class="hljs-built_in">r16</span>,<span class="hljs-number">0x07</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">DDRB</span>,<span class="hljs-built_in">r16</span>            <span class="hljs-comment">;pins to control transistors</span>
    <span class="hljs-keyword">ldi</span> <span class="hljs-built_in">r16</span>,<span class="hljs-number">0x0F</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">DDRC</span>,<span class="hljs-built_in">r16</span>            <span class="hljs-comment">;pins to control 7-segment driver    </span>

<span class="hljs-symbol">collect:</span>
    <span class="hljs-keyword">clr</span> <span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">clr</span> <span class="hljs-built_in">r17</span>
    <span class="hljs-keyword">clr</span> <span class="hljs-built_in">r18</span>
    <span class="hljs-keyword">in</span> <span class="hljs-built_in">r16</span>,<span class="hljs-built_in">PIND</span>         <span class="hljs-comment">;store input from rotary encoder</span>
    <span class="hljs-keyword">lsr</span> <span class="hljs-built_in">r16</span>             <span class="hljs-comment">;shift right to get gray code</span>
    <span class="hljs-keyword">movw</span> <span class="hljs-built_in">z</span>,<span class="hljs-built_in">r16</span>          <span class="hljs-comment">;move to element the gray code is in binary</span>
    <span class="hljs-keyword">add</span> <span class="hljs-built_in">zl</span>,<span class="hljs-built_in">xl</span>
    <span class="hljs-keyword">lpm</span> <span class="hljs-built_in">r18</span>,<span class="hljs-built_in">z</span>             <span class="hljs-comment">;store fetched binary value</span>

<span class="hljs-symbol">convert:</span>
    <span class="hljs-keyword">mov</span> <span class="hljs-built_in">r16</span>,<span class="hljs-built_in">r18</span>
    <span class="hljs-keyword">ldi</span> iterate, <span class="hljs-number">8</span>
    <span class="hljs-keyword">ldi</span> three, <span class="hljs-number">0x03</span>
    <span class="hljs-keyword">ldi</span> threeTens, <span class="hljs-number">0x30</span>
    <span class="hljs-keyword">clr</span> <span class="hljs-built_in">r17</span>
    <span class="hljs-keyword">clr</span> <span class="hljs-built_in">r18</span>

<span class="hljs-symbol">loop:</span>
   <span class="hljs-keyword">rol</span> <span class="hljs-built_in">r16</span>
   <span class="hljs-keyword">rol</span> <span class="hljs-built_in">r17</span>
   <span class="hljs-keyword">rol</span> <span class="hljs-built_in">r18</span>              <span class="hljs-comment">;shift value and BCD registers with carry</span>
   <span class="hljs-keyword">dec</span> iterate          
   <span class="hljs-keyword">breq</span> pov             <span class="hljs-comment">;jump to POV if there are no bits left to convert</span>

   <span class="hljs-keyword">mov</span> temp, <span class="hljs-built_in">r17</span>                    
   <span class="hljs-keyword">andi</span> temp, <span class="hljs-number">0x0F</span>                  
   <span class="hljs-keyword">cpi</span> temp, <span class="hljs-number">0x05</span>           
   <span class="hljs-keyword">brlo</span> tens        <span class="hljs-comment">;skip to tens if value is less than 5       </span>
   <span class="hljs-keyword">add</span> <span class="hljs-built_in">r17</span>,three    <span class="hljs-comment">;otherwise add three</span>
<span class="hljs-symbol">tens:</span>
   <span class="hljs-keyword">cpi</span> temp, <span class="hljs-number">0x50</span>           
   <span class="hljs-keyword">brlo</span> hundreds
   <span class="hljs-keyword">add</span> <span class="hljs-built_in">r17</span>,threeTens
<span class="hljs-symbol">hundreds:</span>
   <span class="hljs-keyword">andi</span> temp, <span class="hljs-number">0x0F</span>
   <span class="hljs-keyword">cpi</span> temp, <span class="hljs-number">0x50</span>           
   <span class="hljs-keyword">brlo</span> loop
   <span class="hljs-keyword">add</span> <span class="hljs-built_in">r18</span>, three
<span class="hljs-keyword">rjmp</span> loop

<span class="hljs-symbol">pov:</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">PORTC</span>,<span class="hljs-built_in">r18</span>           <span class="hljs-comment">;output hundreds value</span>
    <span class="hljs-keyword">ldi</span> <span class="hljs-built_in">r16</span>,<span class="hljs-number">0x04</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">PORTB</span>,<span class="hljs-built_in">r16</span>           <span class="hljs-comment">;enable hundreds 7-seg disp</span>
    <span class="hljs-keyword">rcall</span> delay
    <span class="hljs-keyword">lsr</span> <span class="hljs-built_in">r16</span>

    <span class="hljs-keyword">swap</span> <span class="hljs-built_in">r17</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">PORTC</span>,<span class="hljs-built_in">r17</span>           <span class="hljs-comment">;output tens value</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">PORTB</span>,<span class="hljs-built_in">r16</span>           <span class="hljs-comment">;enable tens 7-seg disp</span>
    <span class="hljs-keyword">rcall</span> delay
    <span class="hljs-keyword">lsr</span> <span class="hljs-built_in">r16</span>

    <span class="hljs-keyword">swap</span> <span class="hljs-built_in">r17</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">PORTC</span>,<span class="hljs-built_in">r17</span>           <span class="hljs-comment">;output ones value</span>
    <span class="hljs-keyword">out</span> <span class="hljs-built_in">PORTB</span>,<span class="hljs-built_in">r16</span>           <span class="hljs-comment">;enable ones 7-seg disp</span>
    <span class="hljs-keyword">rcall</span> delay
<span class="hljs-keyword">rjmp</span> collect

<span class="hljs-symbol">delay:</span>
<span class="hljs-comment">; Generated by delay loop calculator</span>
<span class="hljs-comment">; at http://www.bretmulvey.com/avrdelay.html</span>
<span class="hljs-comment">;</span>
<span class="hljs-comment">; Delay 16 000 cycles</span>
<span class="hljs-comment">; 1ms at 16 MHz</span>

    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r19</span>, <span class="hljs-number">21</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r20</span>, <span class="hljs-number">199</span>
<span class="hljs-symbol">L1:</span> <span class="hljs-keyword">dec</span>  <span class="hljs-built_in">r20</span>
    <span class="hljs-keyword">brne</span> L1
    <span class="hljs-keyword">dec</span>  <span class="hljs-built_in">r19</span>
    <span class="hljs-keyword">brne</span> L1
<span class="hljs-keyword">ret</span>
</code></pre><h2>Conclusion</h2><p>To conclude, I am satisfied with the final result of this project. Unfortunately, I was not able to have operational code by the end of the challenge period. After working on my program throughout the week, however, I was able to get a working solution. My initial code was organized properly, but not operational. This challenge has adequately tested my knowledge of assembly code. It has also helped me develop my understanding of Gray code and a broader understanding on conversion algorithms/techniques.</p><h2>Reference</h2><p>D&#x27;Arcy, Chris. &quot;TEI4M Challenges.&quot; ACES, RSGC, 15 Jan. 2018, <a href="http://darcy.rsgc.on.ca/ACES/TEI4M/1718/Challenges.html#2">darcy.rsgc.on.ca/ACES/TEI4M/1718/Challenges.html#2</a>.</p><p>Grayhill. &quot;Series 25L.&quot; Grayhill.com, Digi-Key, <a href="http://www.grayhill.com/assets/1/7/Mech_Encoder_25L.pdf">www.grayhill.com/assets/1/7/Mech_Encoder_25L.pdf</a>.</p></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Challenge 2. Rotary Encoder: Gray Code","name":"2018-01-20-Gray-Code-Challenge","content":{"compiledSource":"var d=Object.defineProperty,i=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var o=(a,s,n)=\u003es in a?d(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,e=(a,s)=\u003e{for(var n in s||(s={}))r.call(s,n)\u0026\u0026o(a,n,s[n]);if(p)for(var n of p(s))l.call(s,n)\u0026\u0026o(a,n,s[n]);return a},m=(a,s)=\u003ei(a,h(s));var c=(a,s)=\u003e{var n={};for(var t in a)r.call(a,t)\u0026\u0026s.indexOf(t)\u003c0\u0026\u0026(n[t]=a[t]);if(a!=null\u0026\u0026p)for(var t of p(a))s.indexOf(t)\u003c0\u0026\u0026l.call(a,t)\u0026\u0026(n[t]=a[t]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var t=n,{components:a}=t,s=c(t,[\"components\"]);return mdx(MDXLayout,m(e(e({},layoutProps),s),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"Purpose\"),mdx(\"p\",null,\"The purpose of this project is to take input from the rotary encoder and display its value on three 7-segment displays. The rotary encoder outputs its value in gray code, so it must be converted to a binary value. To display this binary value, it must be converted to a binary-coded-decimal (BCD). Transistors must be used to cycle through the 7-segment displays in order to give the appearance of every display being on at once.\"),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Parts List\"),mdx(\"th\",e({parentName:\"tr\"},{align:null})))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"4-Bit Gray-Code Rotary Encoder\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"3\\xD7 7-Segment Display\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"CD4511BE BCD to 7-Segment Display IC\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"4\\xD7 1M\\u2126 Resistor\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"3\\xD7 3904 NPN Transistor\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"3\\xD7 1k\\u2126 Resistor\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"Arduino Uno\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}))))),mdx(\"h2\",null,\"Procedure\"),mdx(\"p\",null,\"This challenge started by wiring the rotary encoder to an existing 7-segment BCD display circuit. The initial circuit consisted of a 4511 IC connected to three 7-segment displays. The displays achieved persistence of vision (POV) by toggling the ground connection through the use of NPN transistors. The wiring of the rotary encoder is nearly the same as that in Challenge 1 Rotary Switch Monitor.\"),mdx(\"p\",null,'The real difference is in the output from the rotary encoder. Instead of returning a binary number according to the position of the rotor, the encoder used here returns a \"Gray code\" value. Gray code is very different from binary. Instead of being a \"weighted\" number system, wherein a change in a specific digit always has the same affect on a number, Gray code is unweighted. This makes it a code instead of a number system. The key feature of Gray code is that between each number only one bit changes value. When using binary, multiple bits often change from a 1 to a 0 while incrementing or decrementing number value. This reduces ambiguity between number states and, in extreme cases, can reduce wear on memory. At right is the bottom view of Gray code rotary encoder, with white squares being zeros and black squares representing ones.'),mdx(\"img\",{style:{float:\"right\"},src:\"/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/rotaryEncoderGraphic.png\"}),mdx(\"p\",null,\"The code does the brunt of the work in this challenge. The code consists of three main parts. First, the program takes input from the rotary encoder attached to \",mdx(\"inlineCode\",{parentName:\"p\"},\"PORTD\"),\" and converts the Gray code to a binary value. Next, the code converts this to a BCD value on \",mdx(\"inlineCode\",{parentName:\"p\"},\"r17\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"r18\"),`. Finally the program displays these values on the 7-segment displays using POV. The code then loops to constantly poll the input states of the rotary encoder.\\u2003\nIn the first step of the input portion, the `,mdx(\"inlineCode\",{parentName:\"p\"},\"collect\"),\" function stores the input state of \",mdx(\"inlineCode\",{parentName:\"p\"},\"PORTD\"),\" to a register. It then shifts this register right, as the zero pin of \",mdx(\"inlineCode\",{parentName:\"p\"},\"PORTD\"),\" does not have input, and the first input is instead on pin one. To convert the Gray code to binary, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"convert\"),\" function adds the binary value of the gray code input to the value of the x register and stores this in the z register. Next it queries the value stored at this position in memory. Here it returns a binary value equivalent to the Gray code. This is because the register stores the binary conversion of the Gray code at the index of the direct binary value of the gray code. For example, while Gray code \",mdx(\"inlineCode\",{parentName:\"p\"},\"0b0011\"),\" is a two, the direct binary value is three.\"),mdx(\"p\",null,\"Next, the program converts the binary value to a BCD. Beginning at the \",mdx(\"inlineCode\",{parentName:\"p\"},\"loop\"),\" label, the program shifts the input value left through the output registers, carrying the dropped value into each consecutive register. Here the \",mdx(\"inlineCode\",{parentName:\"p\"},\"iterate\"),\" register decrements, as the algorithm must know whether or not the input number is fully converted or not. Next the program checks if the low bit of the first register is greater than or equal to three. The value of this register increases by three if this condition is true. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"tens\"),\" label repeats this step for the high bit of the first register. Instead, however, it checks if the register has a value greater than 80 (0x50) and adds 48 (0x30) if this condition is true. Again, this step repeats under the \",mdx(\"inlineCode\",{parentName:\"p\"},\"hundreds\"),\" label, checking the low bit of the second register and adding three accordingly. Here it jumps back to the \",mdx(\"inlineCode\",{parentName:\"p\"},\"loop\"),\" label. The input value is fully converted to BCD when the \",mdx(\"inlineCode\",{parentName:\"p\"},\"iterate\"),\" register reaches zero.\"),mdx(\"p\",null,\"In the final part, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"pov\"),\" function takes the registers storing the BCD value and outputs the according number to the 4511 BCD to 7-segment display chip. The hundreds register displays first, with output on \",mdx(\"inlineCode\",{parentName:\"p\"},\"PORTC\"),\". Next, the base pin of the according transistor activates by setting \",mdx(\"inlineCode\",{parentName:\"p\"},\"PORTB\"),\". After displaying the hundreds digit, the tens digit is displayed by swapping the nibbles of the first register (\",mdx(\"inlineCode\",{parentName:\"p\"},\"r17\"),\"), and repeating the steps for the hundreds register. The transistor select register shifts by one to enable the tens display and disable the hundreds display. Next, \",mdx(\"inlineCode\",{parentName:\"p\"},\"r17\"),\" swaps nibbles again and the above steps repeat, but for the ones digit. In the final step, the program jumps to the beginning of the program and the process repeats.\"),mdx(\"h2\",null,\"Media\"),mdx(\"table\",null,mdx(\"tr\",null,mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/challenge2_bb.png\"})),mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180116_161909.jpg\"}))),mdx(\"tr\",null,mdx(\"th\",null,\"Fritzing diagram\"),mdx(\"th\",null,\"Circuit overview\")),mdx(\"tr\",null,mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180120_161226.jpg\"})),mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/Challenge%202.%20Rotary%20Encoder%20Gray%20code/20180120_161906.jpg\"}))),mdx(\"tr\",null,mdx(\"th\",null,\"Proper operation showing output 14\"),mdx(\"th\",null,\"Bottom of rotary encoder\")),mdx(\"tr\",null,mdx(\"th\",{colSpan:\"2\"},\"Link to YouTube Video: \",mdx(\"a\",{href:\"https://youtu.be/K7AFz38Lux8\"},\"https://youtu.be/K7AFz38Lux8\")))),mdx(\"h2\",null,\"Code\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-avrasm\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; GrayCodeChallenge.asm\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; Created: 2018-01-15 8:57:57 AM\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; Author : Ethan McAuliffe\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\"    iterate = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r24\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\"    temp  = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r25\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\"    three = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r23\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\"    threeTens = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r22\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".cseg\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0000\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),`  reset\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";segment table format: ;gfab_cde.\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0010\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"grayStart:\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\".DB\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"3\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"2\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"7\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"6\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"4\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"5\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"15\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"14\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"12\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"13\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"9\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"11\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"10\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"grayEnd:\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"reset:\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\", low(RAMEND)      \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";ALL assembly code should start by\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"spl\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                     \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; setting the Stack Pointer to\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\", high(RAMEND)     \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; the end of SRAM to support\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"sph\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                     \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; function calls, etc.\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xl\"),\",low(grayStart\u003c\u003c\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\")  \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";position X and Y pointers to the\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xh\"),\",high(grayStart\u003c\u003c\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\") \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";start and end addresses of\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"yl\"),\",low(grayEnd\u003c\u003c\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\")   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; our data table, respectively\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"yh\"),\",high(grayEnd\u003c\u003c\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`)\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"movw\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"x\"),\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";start Z pointer off at the start address of the table.\"),`\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x1E\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"DDRD\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`            \n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x07\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"DDRB\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";pins to control transistors\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0F\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"DDRC\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";pins to control 7-segment driver    \"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"collect:\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"in\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PIND\"),\"         \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";store input from rotary encoder\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lsr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"             \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";shift right to get gray code\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"movw\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";move to element the gray code is in binary\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"add\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"zl\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xl\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lpm\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\"             \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";store fetched binary value\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"convert:\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"mov\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" iterate, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" three, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x03\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" threeTens, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x30\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"loop:\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rol\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rol\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rol\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),\"              \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";shift value and BCD registers with carry\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"dec\"),` iterate          \n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"breq\"),\" pov             \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";jump to POV if there are no bits left to convert\"),`\n\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"mov\"),\" temp, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`                    \n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"andi\"),\" temp, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0F\"),`                  \n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"cpi\"),\" temp, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x05\"),`           \n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"brlo\"),\" tens        \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";skip to tens if value is less than 5       \"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"add\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),\",three    \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";otherwise add three\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"tens:\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"cpi\"),\" temp, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x50\"),`           \n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"brlo\"),` hundreds\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"add\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`,threeTens\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"hundreds:\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"andi\"),\" temp, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0F\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"cpi\"),\" temp, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x50\"),`           \n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"brlo\"),` loop\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"add\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),`, three\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` loop\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"pov:\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PORTC\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r18\"),\"           \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";output hundreds value\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0x04\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PORTB\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"           \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";enable hundreds 7-seg disp\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),` delay\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lsr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"swap\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PORTC\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),\"           \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";output tens value\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PORTB\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"           \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";enable tens 7-seg disp\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),` delay\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lsr\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"swap\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PORTC\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r17\"),\"           \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";output ones value\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"PORTB\"),\",\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"           \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";enable ones 7-seg disp\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),` delay\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` collect\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"delay:\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; Generated by delay loop calculator\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; at http://www.bretmulvey.com/avrdelay.html\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; Delay 16 000 cycles\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"; 1ms at 16 MHz\"),`\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r19\"),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"21\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r20\"),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"199\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-symbol\"}),\"L1:\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"dec\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r20\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"brne\"),` L1\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"dec\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r19\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"brne\"),` L1\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n`)),mdx(\"h2\",null,\"Conclusion\"),mdx(\"p\",null,\"To conclude, I am satisfied with the final result of this project. Unfortunately, I was not able to have operational code by the end of the challenge period. After working on my program throughout the week, however, I was able to get a working solution. My initial code was organized properly, but not operational. This challenge has adequately tested my knowledge of assembly code. It has also helped me develop my understanding of Gray code and a broader understanding on conversion algorithms/techniques.\"),mdx(\"h2\",null,\"Reference\"),mdx(\"p\",null,`D'Arcy, Chris. \"TEI4M Challenges.\" ACES, RSGC, 15 Jan. 2018, `,mdx(\"a\",e({parentName:\"p\"},{href:\"http://darcy.rsgc.on.ca/ACES/TEI4M/1718/Challenges.html#2\"}),\"darcy.rsgc.on.ca/ACES/TEI4M/1718/Challenges.html#2\"),\".\"),mdx(\"p\",null,'Grayhill. \"Series 25L.\" Grayhill.com, Digi-Key, ',mdx(\"a\",e({parentName:\"p\"},{href:\"http://www.grayhill.com/assets/1/7/Mech_Encoder_25L.pdf\"}),\"www.grayhill.com/assets/1/7/Mech_Encoder_25L.pdf\"),\".\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}}},"__N_SSG":true},"page":"/blog/[postName]","query":{"postName":"2018-01-20-Gray-Code-Challenge"},"buildId":"bsNE-1v_Y7tPkyWMxuWlg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>