<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Ethan McAuliffe</title><meta name="description" content="My personal website and blog"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/1bf78e4fad6a32832712.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1bf78e4fad6a32832712.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6794465708b9ff3a7d52.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6794465708b9ff3a7d52.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-ddd010a953737b6e3536.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-4809d8b3f3ef3c100198.js" defer=""></script><script src="/_next/static/chunks/pages/_app-999b137a986838297186.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5BpostName%5D-faa1099c27acb07b2ee8.js" defer=""></script><script src="/_next/static/UTwJR9V20MoZaEMa3ghX8/_buildManifest.js" defer=""></script><script src="/_next/static/UTwJR9V20MoZaEMa3ghX8/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Post_container__39vXa"><div class="Post_backButton__2By7j"><a href="/blog">◀ All Posts</a></div><h1>DC Fan Project</h1><h2>Purpose</h2><p>The purpose of this project is to use the Atmel 328p microcontroller to control the speed of a 12V DC fan. The microcontroller is to take input from a potentiometer and vary the rotation frequency accordingly.</p><h2>Part A. Getting Acquainted with the fan</h2><ol><li><strong>What is the typical operating voltage and current draw of this fan?</strong><br/>12 VDC, 0.34 A</li><li><strong>Identify the name, colour and function of each of the four wires.</strong><br/>Black: GND<br/>Red: Vcc<br/>Yellow: Pulse<br/>Blue: PWM</li><li><strong>What is the operating voltage range of the PWM signal?</strong><br/>2.8 V-6 V</li><li><strong>What is the recommended frequency range of the fan&#x27;s PWM signal?</strong><br/>22 kHz-28 kHz</li><li><strong>What operating conditions produce a detectable audio hum emanating from the fan and how can it be eliminated?</strong><br/>If PWM frequency is in the range of 20 Hz-20 kHz, it will produce an audible hum. To fix this, increase PWM frequency until it is out of range of human hearing (ideally above 20 kHz)</li><li><strong>What is the frequency of the Arduino&#x27;s PWM signal from it&#x27;s analogWrite() function? Explain why.</strong><br/>The Arduino PWM frequency is 980Hz or 490Hz. This is because the prescaler is set on the timers connected to the PWM pins.</li><li><strong>Can the Arduino handle the Fan&#x27;s PWM requirements &#x27;easily&#x27;? If not, what course of action must be considered?</strong><br/>No, as the Arduino PWM frequency is much less than 22kHz. A timer interrupt must be used to produce a PWM signal.</li><li><strong>What is meant be the term open collector (aka open drain)? To which wire colour does this pertain and what additional component is required to facilitate the correct performance of this function?</strong><br/>This means that the output pin is the collector pin of a grounded NPN transistor. This means that the pin is either in a ground or floating state. This pertains to the yellow wire. To use this pin a pull up resistor is required.</li><li><strong>What is the FREQUENCY:ROTATION ratio of the output sense wire?</strong><br/>2:1</li></ol><h2>Part B. Hardware Design</h2><a href="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/4wirefan_bb.png"><img src="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/4wirefan_bb.png"/></a><h2>Part C. PWM Design</h2><p>This project uses the PWM (pulse-width modulation) functions of the 328p to adjust the fan rotation frequency. The fan interprets the duty cycle of the PWM signal. As such, the frequency of the PWM signal must be constant and the duty cycle should change according to the position of the potentiometer. Using mode 7 in conjunction with the <code>OCR2A</code> and <code>OCR2B</code> registers, the duty cycle and frequency can be independently adjusted. The formula to convert frequency (in Hz) to a value which <code>OCR2A</code> can understand is:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>O</mi><mi>C</mi><mi>R</mi><mn>2</mn><mi>A</mi><mo>=</mo><mfrac><mrow><mi>F</mi><mi mathvariant="normal">_</mi><mi>C</mi><mi>P</mi><mi>U</mi></mrow><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>r</mi><mo>⋅</mo><mi>F</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>y</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">OCR2A =  \frac{F\_CPU}{Prescaler \cdot Frequency}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.00773em">OCR</span><span class="mord">2</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.26377em;vertical-align:-0.8804400000000001em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.38333em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mord mathnormal">resc</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal" style="margin-right:0.02778em">er</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em">cy</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.6999999999999997em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="mord" style="margin-right:0.02778em">_</span><span class="mord mathnormal" style="margin-right:0.13889em">CP</span><span class="mord mathnormal" style="margin-right:0.10903em">U</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><p>This value can range from 0-255 and it determines the value at which the counter attached to timer 2 should reset to zero. Here we have defined it as 80 with a prescaler of 8 for a PWM frequency of 25 kHz. To augment the duty cycle of the PWM signal, the microcontroller uses the value of <code>OCR2B</code>. The larger the value stored in <code>OCR2B</code>, the greater the duty cycle. Each time the counter resets (according to the value of <code>OCR2A</code>), the pin state changes to <code>HIGH</code> until the value reaches that of <code>OCR2B</code> and it changes to <code>LOW</code>.</p><h2>Part D. Fan Speed (ADC)</h2><p>The DC Fan code uses the analog to digital converter (ADC) built into the 328p to determine the speed at which the user wants the fan to operate. The external circuit is a voltage divider from 5V-0V. The microcontroller interprets this voltage as a 10-bit value which is then converted to a duty cycle value and stored in <code>OCR2B</code>.Timer 0 controls the ADC by sending out a request for data each time it overflows. The prescaler value of timer 0 determines the frequency of this request. An empty interrupt must be set in order to properly trigger the ADC read. In this example it is set to request ADC data 64 times per second. When the ADC has data to return, another interrupt occurs. Only the upper byte of this data is used (as the duty cycle can only be an 8-bit value) so the <code>ADLAR</code> value is set. This is then mapped to a duty cycle value and the duty cycle changes during the next interrupt of the PWM timer. The code discards the first value of the ADC, in accordance to Atmel guidelines, as the first read is often inaccurate.</p><h2>Part E. Sense (Feedback, Tachometry, Yellow Wire)</h2><p>The purpose of the sense system is to determine whether or not the fan is operating as desired. By combining this data with the abilities of PID, the user can have more precise control over the fan speed. The yellow wire changes state four times per revolution of the fan. This wire requires a pullup resistor as it is an open gate pin. Without this resistor, the pin would either be in a ground or floating state. By pulling the wire up to +5V, the microcontroller can determine how often the state changes. The 328p records the speed of the fan by use of an external interrupt. Each time the pin is in a <code>HIGH</code> state the interrupt triggers and increases the <code>pulseCount</code> register by one. The <code>ICES1</code> bit in <code>TCCRB1</code> is set to ensure that the program operates in this way. Each second, as determined by the overflow of timer 1, the program compares the value of this register to the theoretical rotation/second value defined in the datasheet. The program uses the ADC defined duty cycle to index an array and determine what the rotation/second value should be. In this array the rotation/second values are twice the actual values because the external interrupt triggers twice per revolution.</p><h2>Part F. Serial Communication (USART: Universal Synchronous/Asynchronous serial Receive and Transmit)</h2><p>By using USART the microcontroller can relay to the user the current state of the program. In this project the microcontroller tells the computer how closely the fan is rotating to the intended value. The 328p first configures USART to send data in the <code>UARTInit</code> label. The baud rate set here is a function of the F_CPU value. To get 9600 baud at 16 MHz the value stored in <code>UBRR0</code> (a two-byte word) must be 103. To send data out the <code>TXEN0</code> bit in the <code>UCSROB</code> register must be set high. If the microcontroller needed to receive data, the <code>RXEN0</code> bit in this register would be set. Note that each call of the USART registers includes a ‘0’ because there can be multiple USART communication interfaces on the same chip. Each time timer 1 overflows, the difference between the ideal value and the actual value of the rotations/second is sent over USART. Added to this value is an ASCII ‘A’ or sixty-five as the graphing utility cannot understand negative numbers (and the rpm in some cases may be less than expected). This provides a buffer between the difference and zero.</p><h2>Part G. Graphic Visualization</h2><p>By using Data visualizer tool included with Atmel Studio 7 one can interpret the data sent over USART to the computer. The 328p Arduino connects to the computer via a USB cable. Selecting the proper COM port and baud rate in the visualizer will return rotation/second values that the graph function can display. </p><h2>Part H. PID (Proportional – Integral – Derivative)</h2><p>PID completes the link between the feedback and PWM signals of the DC fan. Often the desired and actual values of the rotation/second of the fan are not the same. PID remedies this by proportionally scaling up or down the duty cycle as the rotation/second approaches the desired level. This alone will never reach the desired value, so PID uses the integral between the actual rotation/second and the desired level to complete the operation. Using the derivative of the actual rotation/second function helps the program understand how much to adjust the duty cycle in order to have the desired effect.</p><h2>Media</h2><table><tr><td><a href="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_211716.jpg"><img src="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_211716.jpg"/></a></td><td><a href="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/CaptureMe.PNG"><img src="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/CaptureMe.PNG"/></a></td></tr><tr><th>Completed Fan Circuit</th><th>Graphic Visualizer screenshot</th></tr><tr><td><a href="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_211725.jpg"><img src="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_211725.jpg"/></a></td><td><a href="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_213612.jpg"><img src="/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_213612.jpg"/></a></td></tr><tr><th>Close up of tach wire &amp; pot</th><th>Fan at full speed blowing paper card</th></tr><tr><th colSpan="2">Link to YouTube Video: <a href="https://youtu.be/PMThd7WUhio">https://youtu.be/PMThd7WUhio</a></th></tr></table><h2>Code</h2><pre><code class="hljs language-avrasm"><span class="hljs-comment">; DCfan.asm</span>
<span class="hljs-comment">;</span>
<span class="hljs-comment">; Created: 2018-04-11 1:39:45 PM</span>
<span class="hljs-comment">; Author : Ethan McAuliffe</span>
<span class="hljs-comment">;</span>
<span class="hljs-meta">#include &quot;prescalers.h&quot;</span>

<span class="hljs-meta">#define F_CPU 16000000; cpu freq 16 Mhz</span>
<span class="hljs-meta">#define PRESCALE 8</span>
<span class="hljs-meta">#define F_FAN 25000</span>
<span class="hljs-meta">#define FREQ F_CPU/PRESCALE/F_FAN; (OCR2A) = 80</span>
<span class="hljs-meta">#define DUTY 40; start with a 40% duty cycle</span>
<span class="hljs-meta">#define BAUDRATE 103;9600 baud</span>
<span class="hljs-meta">#define newLine 13;</span>
<span class="hljs-meta">#define offset &#x27;A&#x27;;</span>

<span class="hljs-meta">.def</span> duty         =<span class="hljs-built_in">r19</span>  <span class="hljs-comment">;</span>
<span class="hljs-meta">.def</span> pulseCount   =<span class="hljs-built_in">r20</span>  <span class="hljs-comment">;</span>
<span class="hljs-meta">.def</span> rps          =<span class="hljs-built_in">r21</span>  <span class="hljs-comment">;</span>
<span class="hljs-meta">.def</span> txByte       =<span class="hljs-built_in">r22</span>  <span class="hljs-comment">;</span>
<span class="hljs-meta">.def</span> empirical    =<span class="hljs-built_in">r23</span>  <span class="hljs-comment">;</span>
<span class="hljs-meta">.def</span> setPoint     =<span class="hljs-built_in">r24</span>  <span class="hljs-comment">;</span>
<span class="hljs-meta">.def</span> difference   =<span class="hljs-built_in">r25</span>  <span class="hljs-comment">;</span>

<span class="hljs-meta">.org</span> <span class="hljs-number">0x0000</span>
    <span class="hljs-keyword">rjmp</span> reset
<span class="hljs-meta">.org</span> <span class="hljs-number">0x0014</span>
    <span class="hljs-keyword">rjmp</span> TIM1_CAPT
<span class="hljs-meta">.org</span> <span class="hljs-number">0x001A</span>
    <span class="hljs-keyword">rjmp</span> TIM1_OVF
<span class="hljs-meta">.org</span> <span class="hljs-number">0x0020</span>
    <span class="hljs-keyword">rjmp</span> TIM0_OVF
<span class="hljs-meta">.org</span> <span class="hljs-number">0x002A</span>
    <span class="hljs-keyword">rjmp</span> ADC_Complete

<span class="hljs-meta">.org</span> <span class="hljs-number">0x0050</span>

<span class="hljs-symbol">RPMStart:</span>
<span class="hljs-comment">;.db    900,900,900,900,1200,2000,2700,3400,4050,4500,4800,0</span>
<span class="hljs-meta">.db</span> <span class="hljs-number">30</span>,<span class="hljs-number">30</span>,<span class="hljs-number">30</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">66</span>,<span class="hljs-number">90</span>,<span class="hljs-number">113</span>,<span class="hljs-number">135</span>,<span class="hljs-number">150</span>,<span class="hljs-number">160</span>,<span class="hljs-number">0</span> <span class="hljs-comment">;rotations/second according to duty cycle from datasheet</span>
<span class="hljs-symbol">RPMEnd:</span>

<span class="hljs-symbol">Greeting:</span>
<span class="hljs-meta">.db</span> <span class="hljs-string">&quot;Hello world! &quot;</span>,newLine //newLine terminated

<span class="hljs-meta">.org</span> <span class="hljs-number">0x0100</span><span class="hljs-comment">;</span>
<span class="hljs-symbol">reset:</span>
    <span class="hljs-keyword">cli</span>              <span class="hljs-comment">;</span>
    <span class="hljs-keyword">rcall</span> RPMInit    <span class="hljs-comment">;</span>
    <span class="hljs-keyword">rcall</span> PWMInit    <span class="hljs-comment">;</span>
    <span class="hljs-keyword">rcall</span> ADCInit    <span class="hljs-comment">;</span>
    <span class="hljs-keyword">rcall</span> TM0Init    <span class="hljs-comment">;for adc</span>
    <span class="hljs-keyword">rcall</span> TM1Init    <span class="hljs-comment">;for input capture</span>
    <span class="hljs-keyword">rcall</span> UARTInit   <span class="hljs-comment">;</span>
<span class="hljs-comment">;   rcall display    ;prints greeting to terminal</span>
<span class="hljs-comment">;   rcall PIDInit    ;</span>
<span class="hljs-keyword">sei</span>

<span class="hljs-symbol">wait:</span>
    <span class="hljs-keyword">rjmp</span> wait




<span class="hljs-symbol">UARTInit:</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,BAUDRATE&gt;&gt;<span class="hljs-number">8</span>
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">UBRR0H</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,BAUDRATE
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">UBRR0L</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;TXEN0)     <span class="hljs-comment">;RXEN0 for receive</span>
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">UCSR0B</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;UCSZ01) | (<span class="hljs-number">1</span>&lt;&lt;UCSZ00)
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">UCSR0C</span>,<span class="hljs-built_in">r16</span>
<span class="hljs-keyword">ret</span>

<span class="hljs-symbol">display:</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">xl</span>,low(Greeting&lt;&lt;<span class="hljs-number">1</span>)
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">xh</span>,high(Greeting&lt;&lt;<span class="hljs-number">1</span>)
    <span class="hljs-keyword">movw</span> <span class="hljs-built_in">z</span>,<span class="hljs-built_in">x</span>
    nextChar:
        <span class="hljs-keyword">lpm</span>   txByte,<span class="hljs-built_in">z</span>+
        <span class="hljs-keyword">rcall</span> transmit
        <span class="hljs-keyword">cpi</span>   txByte,newLine
        <span class="hljs-keyword">brne</span>  nextChar
    <span class="hljs-keyword">ret</span>
<span class="hljs-symbol">transmit:</span>
    <span class="hljs-keyword">lds</span>  <span class="hljs-built_in">r16</span>,<span class="hljs-built_in">UCSR0A</span>         <span class="hljs-comment">;read control status register &#x27;A&#x27;</span>
    <span class="hljs-keyword">sbrs</span> <span class="hljs-built_in">r16</span>,UDRE0
    <span class="hljs-keyword">rjmp</span> transmit
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">UDR0</span>,txByte
<span class="hljs-keyword">ret</span>
<span class="hljs-symbol">ADCInit:</span>
    <span class="hljs-keyword">ser</span>  <span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">sts</span>  DIDR0,<span class="hljs-built_in">r16</span>  <span class="hljs-comment">;disable pins to reduce power consumption</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;REFS0)|(<span class="hljs-number">1</span>&lt;&lt;ADLAR)  <span class="hljs-comment">;</span>
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">ADMUX</span>,<span class="hljs-built_in">r16</span>                  <span class="hljs-comment">;</span>
    <span class="hljs-comment">;Enable, start dummy conversion, enable timer as trigger, , prescaler...</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;ADEN)|(<span class="hljs-number">1</span>&lt;&lt;ADSC)|(<span class="hljs-number">1</span>&lt;&lt;ADATE)|(<span class="hljs-number">1</span>&lt;&lt;ADIE)|(<span class="hljs-number">1</span>&lt;&lt;ADPS2)|(<span class="hljs-number">1</span>&lt;&lt;ADPS1)|(<span class="hljs-number">1</span>&lt;&lt;ADPS0)<span class="hljs-comment">;</span>
    <span class="hljs-keyword">sts</span>  ADCSRA,<span class="hljs-built_in">r16</span>                 <span class="hljs-comment">;</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;ADTS2)         <span class="hljs-comment">;</span>
    <span class="hljs-keyword">sts</span>  ADCSRB,<span class="hljs-built_in">r16</span>                 <span class="hljs-comment">;</span>
<span class="hljs-symbol">dummy:</span>
    <span class="hljs-comment">;first read is not accurate - start conversion, check for data, throw away</span>
    <span class="hljs-keyword">lds</span>  <span class="hljs-built_in">r16</span>,ADCSRA <span class="hljs-comment">;load ADCSRA register to check dummy flag</span>
    <span class="hljs-keyword">andi</span> <span class="hljs-built_in">r16</span>,<span class="hljs-number">1</span>&lt;&lt;ADIF
    <span class="hljs-keyword">breq</span> dummy
<span class="hljs-keyword">ret</span>

<span class="hljs-symbol">RPMInit:</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">xl</span>,low(RPMStart &lt;&lt; <span class="hljs-number">1</span>)  <span class="hljs-comment">;actually rotations/second as they are smaller and fit in a single byte</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">xh</span>,low(RPMStart &lt;&lt; <span class="hljs-number">1</span>)
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">yl</span>,low(RPMEnd &lt;&lt; <span class="hljs-number">1</span>)
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">yh</span>,low(RPMEnd &lt;&lt; <span class="hljs-number">1</span>)
    <span class="hljs-keyword">movw</span> <span class="hljs-built_in">z</span>,<span class="hljs-built_in">x</span>
<span class="hljs-keyword">ret</span>
<span class="hljs-symbol">PWMInit:</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span> &lt;&lt; PORTD3)
    <span class="hljs-keyword">out</span>  <span class="hljs-built_in">DDRD</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span> &lt;&lt; COM2B1) | (<span class="hljs-number">1</span> &lt;&lt; WGM21) | (<span class="hljs-number">1</span> &lt;&lt; WGM20) <span class="hljs-comment">; OC2A disconnected, OC2B connected, MODE 7 (OCR2A as TOP)</span>
    <span class="hljs-keyword">sts</span>  TCCR2A,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span> &lt;&lt; WGM22) | (<span class="hljs-number">1</span> &lt;&lt; T2ps8) <span class="hljs-comment">; complete WGM definition and prescaler</span>
    <span class="hljs-keyword">sts</span>  TCCR2B,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,FREQ
    <span class="hljs-keyword">sts</span>  OCR2A,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,DUTY
    <span class="hljs-keyword">sts</span>  OCR2B,<span class="hljs-built_in">r16</span>
<span class="hljs-keyword">ret</span>

<span class="hljs-symbol">TM1Init:</span>
<span class="hljs-comment">;   clr   r16       ;alternatives to clear a register</span>
<span class="hljs-comment">;   ldi   r16,0</span>
<span class="hljs-comment">;   andi  r16,0</span>

    <span class="hljs-keyword">eor</span>  <span class="hljs-built_in">r16</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">TCCR1A</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(T1ps256)|(<span class="hljs-number">1</span>&lt;&lt;ICES1) <span class="hljs-comment">;input capture rising edge, prescale 256 (2^24)/(2^16)/(2^8)=1/s</span>
    <span class="hljs-keyword">sts</span>  <span class="hljs-built_in">TCCR1B</span>,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;ICIE1)|(<span class="hljs-number">1</span>&lt;&lt;TOIE1)<span class="hljs-comment">;enable input capture and enable timer interrupt overflow enable</span>
    <span class="hljs-keyword">sts</span>  TIMSK1,<span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">clr</span>  pulseCount
<span class="hljs-keyword">ret</span>

<span class="hljs-symbol">TM0Init:</span>
    <span class="hljs-keyword">clr</span>  <span class="hljs-built_in">r16</span>                <span class="hljs-comment">;this timer is responsible for telling the ADC to read the value of the potentiometer</span>
    <span class="hljs-keyword">out</span>  TCCR0A,<span class="hljs-built_in">r16</span>     <span class="hljs-comment">;</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,T0ps1024   <span class="hljs-comment">;2^24/2^10/2^8 = 2^6 = 64 ADC/sec</span>
    <span class="hljs-keyword">out</span>  TCCR0B,<span class="hljs-built_in">r16</span>     <span class="hljs-comment">;</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,(<span class="hljs-number">1</span>&lt;&lt;TOIE0)
    <span class="hljs-keyword">sts</span>  TIMSK0,<span class="hljs-built_in">r16</span>     <span class="hljs-comment">;</span>
<span class="hljs-keyword">ret</span>

<span class="hljs-symbol">TIM0_OVF:</span>
<span class="hljs-keyword">reti</span>                    <span class="hljs-comment">;required to have the ADIF cleared</span>

<span class="hljs-symbol">ADC_Complete:</span>
    <span class="hljs-keyword">lds</span>  duty,<span class="hljs-built_in">ADCH</span>      <span class="hljs-comment">;load upper byte of adc value</span>
    <span class="hljs-keyword">ldi</span>  <span class="hljs-built_in">r16</span>,FREQ       <span class="hljs-comment">;set to 80</span>
    <span class="hljs-keyword">mul</span>  <span class="hljs-built_in">r16</span>,duty       <span class="hljs-comment">;multiply by duty</span>
    <span class="hljs-keyword">sts</span>  OCR2B,<span class="hljs-built_in">r1</span>       <span class="hljs-comment">;r1 stores high byte of product (divide by 256)</span>
<span class="hljs-keyword">reti</span>

<span class="hljs-symbol">TIM1_CAPT:</span>
    <span class="hljs-keyword">inc</span>  pulseCount
<span class="hljs-keyword">reti</span>

<span class="hljs-symbol">TIM1_OVF:</span>
<span class="hljs-comment">;   mov  rps,pulseCount ;get number of rotations/second (*2)</span>
<span class="hljs-comment">;   clr  pulseCount     ;clear immediately to record every pulse</span>
<span class="hljs-comment">;   lsr  rps</span>
    <span class="hljs-keyword">mov</span>  empirical,pulseCount<span class="hljs-comment">;[30-160] rps</span>
    <span class="hljs-keyword">clr</span>  pulseCount         <span class="hljs-comment">;</span>
    <span class="hljs-keyword">ldi</span>  difference,offset  <span class="hljs-comment">;</span>
    <span class="hljs-keyword">add</span>  difference,empirical<span class="hljs-comment">;</span>
    <span class="hljs-keyword">mov</span>  <span class="hljs-built_in">r16</span>,duty           <span class="hljs-comment">;get duty value of [0-80]</span>
    <span class="hljs-keyword">lsr</span>  <span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">lsr</span>  <span class="hljs-built_in">r16</span>                    <span class="hljs-comment">;shift right thrice</span>
    <span class="hljs-keyword">lsr</span>  <span class="hljs-built_in">r16</span>
    <span class="hljs-keyword">movw</span> <span class="hljs-built_in">z</span>,<span class="hljs-built_in">x</span>                <span class="hljs-comment">;zero index of RPS</span>
    <span class="hljs-keyword">add</span>  <span class="hljs-built_in">zl</span>,<span class="hljs-built_in">r16</span>             <span class="hljs-comment">;set index</span>
    <span class="hljs-keyword">lpm</span>  setPoint,<span class="hljs-built_in">z</span>         <span class="hljs-comment">;</span>
    <span class="hljs-keyword">sub</span>  difference,setPoint
    <span class="hljs-keyword">mov</span>  txByte,difference  <span class="hljs-comment">;place difference in the transmit register</span>
    <span class="hljs-keyword">rcall</span>  transmit         <span class="hljs-comment">;transmit the difference</span>
<span class="hljs-keyword">reti</span>
</code></pre><h2>Reference</h2><p>D&#x27;Arcy, Chris. “AVR Assembly Tasks.” ACES, RSGC, 28 Mar. 2018, <a href="http://darcy.rsgc.on.ca/ACES/TEI4M/1718/AssemblyTasks.html">http://darcy.rsgc.on.ca/ACES/TEI4M/1718/AssemblyTasks.html</a>.</p></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"DC Fan Project","name":"2018-05-21-DC-Fan-Project","content":{"compiledSource":"var i=Object.defineProperty,N=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var l=(e,s,n)=\u003es in e?i(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(e,s)=\u003e{for(var n in s||(s={}))m.call(s,n)\u0026\u0026l(e,n,s[n]);if(p)for(var n of p(s))r.call(s,n)\u0026\u0026l(e,n,s[n]);return e},o=(e,s)=\u003eN(e,d(s));var c=(e,s)=\u003e{var n={};for(var t in e)m.call(e,t)\u0026\u0026s.indexOf(t)\u003c0\u0026\u0026(n[t]=e[t]);if(e!=null\u0026\u0026p)for(var t of p(e))s.indexOf(t)\u003c0\u0026\u0026r.call(e,t)\u0026\u0026(n[t]=e[t]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var t=n,{components:e}=t,s=c(t,[\"components\"]);return mdx(MDXLayout,o(a(a({},layoutProps),s),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"Purpose\"),mdx(\"p\",null,\"The purpose of this project is to use the Atmel 328p microcontroller to control the speed of a 12V DC fan. The microcontroller is to take input from a potentiometer and vary the rotation frequency accordingly.\"),mdx(\"h2\",null,\"Part A. Getting Acquainted with the fan\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What is the typical operating voltage and current draw of this fan?\"),mdx(\"br\",{parentName:\"li\"}),\"12 VDC, 0.34 A\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"Identify the name, colour and function of each of the four wires.\"),mdx(\"br\",{parentName:\"li\"}),\"Black: GND\",mdx(\"br\",{parentName:\"li\"}),\"Red: Vcc\",mdx(\"br\",{parentName:\"li\"}),\"Yellow: Pulse\",mdx(\"br\",{parentName:\"li\"}),\"Blue: PWM\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What is the operating voltage range of the PWM signal?\"),mdx(\"br\",{parentName:\"li\"}),\"2.8 V-6 V\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What is the recommended frequency range of the fan's PWM signal?\"),mdx(\"br\",{parentName:\"li\"}),\"22 kHz-28 kHz\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What operating conditions produce a detectable audio hum emanating from the fan and how can it be eliminated?\"),mdx(\"br\",{parentName:\"li\"}),\"If PWM frequency is in the range of 20 Hz-20 kHz, it will produce an audible hum. To fix this, increase PWM frequency until it is out of range of human hearing (ideally above 20 kHz)\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What is the frequency of the Arduino's PWM signal from it's analogWrite() function? Explain why.\"),mdx(\"br\",{parentName:\"li\"}),\"The Arduino PWM frequency is 980Hz or 490Hz. This is because the prescaler is set on the timers connected to the PWM pins.\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"Can the Arduino handle the Fan's PWM requirements 'easily'? If not, what course of action must be considered?\"),mdx(\"br\",{parentName:\"li\"}),\"No, as the Arduino PWM frequency is much less than 22kHz. A timer interrupt must be used to produce a PWM signal.\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What is meant be the term open collector (aka open drain)? To which wire colour does this pertain and what additional component is required to facilitate the correct performance of this function?\"),mdx(\"br\",{parentName:\"li\"}),\"This means that the output pin is the collector pin of a grounded NPN transistor. This means that the pin is either in a ground or floating state. This pertains to the yellow wire. To use this pin a pull up resistor is required.\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"What is the FREQUENCY:ROTATION ratio of the output sense wire?\"),mdx(\"br\",{parentName:\"li\"}),\"2:1\")),mdx(\"h2\",null,\"Part B. Hardware Design\"),mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/DC%20Fan/4wirefan_bb.png\"}),mdx(\"h2\",null,\"Part C. PWM Design\"),mdx(\"p\",null,\"This project uses the PWM (pulse-width modulation) functions of the 328p to adjust the fan rotation frequency. The fan interprets the duty cycle of the PWM signal. As such, the frequency of the PWM signal must be constant and the duty cycle should change according to the position of the potentiometer. Using mode 7 in conjunction with the \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2A\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2B\"),\" registers, the duty cycle and frequency can be independently adjusted. The formula to convert frequency (in Hz) to a value which \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2A\"),\" can understand is:\"),mdx(\"div\",a({},{className:\"math math-display\"}),mdx(\"span\",a({parentName:\"div\"},{className:\"katex-display\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-mathml\"}),mdx(\"math\",a({parentName:\"span\"},{xmlns:\"http://www.w3.org/1998/Math/MathML\",display:\"block\"}),mdx(\"semantics\",{parentName:\"math\"},mdx(\"mrow\",{parentName:\"semantics\"},mdx(\"mi\",{parentName:\"mrow\"},\"O\"),mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"R\"),mdx(\"mn\",{parentName:\"mrow\"},\"2\"),mdx(\"mi\",{parentName:\"mrow\"},\"A\"),mdx(\"mo\",{parentName:\"mrow\"},\"=\"),mdx(\"mfrac\",{parentName:\"mrow\"},mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"F\"),mdx(\"mi\",a({parentName:\"mrow\"},{mathvariant:\"normal\"}),\"_\"),mdx(\"mi\",{parentName:\"mrow\"},\"C\"),mdx(\"mi\",{parentName:\"mrow\"},\"P\"),mdx(\"mi\",{parentName:\"mrow\"},\"U\")),mdx(\"mrow\",{parentName:\"mfrac\"},mdx(\"mi\",{parentName:\"mrow\"},\"P\"),mdx(\"mi\",{parentName:\"mrow\"},\"r\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"s\"),mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mi\",{parentName:\"mrow\"},\"a\"),mdx(\"mi\",{parentName:\"mrow\"},\"l\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"r\"),mdx(\"mo\",{parentName:\"mrow\"},\"\\u22C5\"),mdx(\"mi\",{parentName:\"mrow\"},\"F\"),mdx(\"mi\",{parentName:\"mrow\"},\"r\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"q\"),mdx(\"mi\",{parentName:\"mrow\"},\"u\"),mdx(\"mi\",{parentName:\"mrow\"},\"e\"),mdx(\"mi\",{parentName:\"mrow\"},\"n\"),mdx(\"mi\",{parentName:\"mrow\"},\"c\"),mdx(\"mi\",{parentName:\"mrow\"},\"y\")))),mdx(\"annotation\",a({parentName:\"semantics\"},{encoding:\"application/x-tex\"}),\"OCR2A =  \\\\frac{F\\\\_CPU}{Prescaler \\\\cdot Frequency}\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"katex-html\",\"aria-hidden\":\"true\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"0.68333em\",verticalAlign:\"0em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.00773em\"}}),\"OCR\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),\"2\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"A\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mrel\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2777777777777778em\"}}))),mdx(\"span\",a({parentName:\"span\"},{className:\"base\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"strut\",style:{height:\"2.26377em\",verticalAlign:\"-0.8804400000000001em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mopen nulldelimiter\"})),mdx(\"span\",a({parentName:\"span\"},{className:\"mfrac\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-t vlist-t2\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"1.38333em\"}}),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-2.314em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"}}),\"P\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"resc\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"a\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.01968em\"}}),\"l\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.02778em\"}}),\"er\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mbin\"}),\"\\u22C5\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mspace\",style:{marginRight:\"0.2222222222222222em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"re\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.03588em\"}}),\"q\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"u\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"e\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\"}),\"n\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.03588em\"}}),\"cy\"))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.23em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"frac-line\",style:{borderBottomWidth:\"0.04em\"}}))),mdx(\"span\",a({parentName:\"span\"},{style:{top:\"-3.6999999999999997em\"}}),mdx(\"span\",a({parentName:\"span\"},{className:\"pstrut\",style:{height:\"3em\"}})),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"}}),\"F\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord\",style:{marginRight:\"0.02778em\"}}),\"_\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.13889em\"}}),\"CP\"),mdx(\"span\",a({parentName:\"span\"},{className:\"mord mathnormal\",style:{marginRight:\"0.10903em\"}}),\"U\")))),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-s\"}),\"\\u200B\")),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist-r\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"vlist\",style:{height:\"0.8804400000000001em\"}}),mdx(\"span\",{parentName:\"span\"}))))),mdx(\"span\",a({parentName:\"span\"},{className:\"mclose nulldelimiter\"})))))))),mdx(\"p\",null,\"This value can range from 0-255 and it determines the value at which the counter attached to timer 2 should reset to zero. Here we have defined it as 80 with a prescaler of 8 for a PWM frequency of 25 kHz. To augment the duty cycle of the PWM signal, the microcontroller uses the value of \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2B\"),\". The larger the value stored in \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2B\"),\", the greater the duty cycle. Each time the counter resets (according to the value of \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2A\"),\"), the pin state changes to \",mdx(\"inlineCode\",{parentName:\"p\"},\"HIGH\"),\" until the value reaches that of \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2B\"),\" and it changes to \",mdx(\"inlineCode\",{parentName:\"p\"},\"LOW\"),\".\"),mdx(\"h2\",null,\"Part D. Fan Speed (ADC)\"),mdx(\"p\",null,\"The DC Fan code uses the analog to digital converter (ADC) built into the 328p to determine the speed at which the user wants the fan to operate. The external circuit is a voltage divider from 5V-0V. The microcontroller interprets this voltage as a 10-bit value which is then converted to a duty cycle value and stored in \",mdx(\"inlineCode\",{parentName:\"p\"},\"OCR2B\"),\".Timer 0 controls the ADC by sending out a request for data each time it overflows. The prescaler value of timer 0 determines the frequency of this request. An empty interrupt must be set in order to properly trigger the ADC read. In this example it is set to request ADC data 64 times per second. When the ADC has data to return, another interrupt occurs. Only the upper byte of this data is used (as the duty cycle can only be an 8-bit value) so the \",mdx(\"inlineCode\",{parentName:\"p\"},\"ADLAR\"),\" value is set. This is then mapped to a duty cycle value and the duty cycle changes during the next interrupt of the PWM timer. The code discards the first value of the ADC, in accordance to Atmel guidelines, as the first read is often inaccurate.\"),mdx(\"h2\",null,\"Part E. Sense (Feedback, Tachometry, Yellow Wire)\"),mdx(\"p\",null,\"The purpose of the sense system is to determine whether or not the fan is operating as desired. By combining this data with the abilities of PID, the user can have more precise control over the fan speed. The yellow wire changes state four times per revolution of the fan. This wire requires a pullup resistor as it is an open gate pin. Without this resistor, the pin would either be in a ground or floating state. By pulling the wire up to +5V, the microcontroller can determine how often the state changes. The 328p records the speed of the fan by use of an external interrupt. Each time the pin is in a \",mdx(\"inlineCode\",{parentName:\"p\"},\"HIGH\"),\" state the interrupt triggers and increases the \",mdx(\"inlineCode\",{parentName:\"p\"},\"pulseCount\"),\" register by one. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"ICES1\"),\" bit in \",mdx(\"inlineCode\",{parentName:\"p\"},\"TCCRB1\"),\" is set to ensure that the program operates in this way. Each second, as determined by the overflow of timer 1, the program compares the value of this register to the theoretical rotation/second value defined in the datasheet. The program uses the ADC defined duty cycle to index an array and determine what the rotation/second value should be. In this array the rotation/second values are twice the actual values because the external interrupt triggers twice per revolution.\"),mdx(\"h2\",null,\"Part F. Serial Communication (USART: Universal Synchronous/Asynchronous serial Receive and Transmit)\"),mdx(\"p\",null,\"By using USART the microcontroller can relay to the user the current state of the program. In this project the microcontroller tells the computer how closely the fan is rotating to the intended value. The 328p first configures USART to send data in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"UARTInit\"),\" label. The baud rate set here is a function of the F_CPU value. To get 9600 baud at 16 MHz the value stored in \",mdx(\"inlineCode\",{parentName:\"p\"},\"UBRR0\"),\" (a two-byte word) must be 103. To send data out the \",mdx(\"inlineCode\",{parentName:\"p\"},\"TXEN0\"),\" bit in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"UCSROB\"),\" register must be set high. If the microcontroller needed to receive data, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"RXEN0\"),\" bit in this register would be set. Note that each call of the USART registers includes a \\u20180\\u2019 because there can be multiple USART communication interfaces on the same chip. Each time timer 1 overflows, the difference between the ideal value and the actual value of the rotations/second is sent over USART. Added to this value is an ASCII \\u2018A\\u2019 or sixty-five as the graphing utility cannot understand negative numbers (and the rpm in some cases may be less than expected). This provides a buffer between the difference and zero.\"),mdx(\"h2\",null,\"Part G. Graphic Visualization\"),mdx(\"p\",null,\"By using Data visualizer tool included with Atmel Studio 7 one can interpret the data sent over USART to the computer. The 328p Arduino connects to the computer via a USB cable. Selecting the proper COM port and baud rate in the visualizer will return rotation/second values that the graph function can display.\\u2003\"),mdx(\"h2\",null,\"Part H. PID (Proportional \\u2013 Integral \\u2013 Derivative)\"),mdx(\"p\",null,\"PID completes the link between the feedback and PWM signals of the DC fan. Often the desired and actual values of the rotation/second of the fan are not the same. PID remedies this by proportionally scaling up or down the duty cycle as the rotation/second approaches the desired level. This alone will never reach the desired value, so PID uses the integral between the actual rotation/second and the desired level to complete the operation. Using the derivative of the actual rotation/second function helps the program understand how much to adjust the duty cycle in order to have the desired effect.\"),mdx(\"h2\",null,\"Media\"),mdx(\"table\",null,mdx(\"tr\",null,mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_211716.jpg\"})),mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/DC%20Fan/CaptureMe.PNG\"}))),mdx(\"tr\",null,mdx(\"th\",null,\"Completed Fan Circuit\"),mdx(\"th\",null,\"Graphic Visualizer screenshot\")),mdx(\"tr\",null,mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_211725.jpg\"})),mdx(\"td\",null,mdx(\"img\",{src:\"/assets/img/ER%20Reports/Grade%2012/DC%20Fan/20180521_213612.jpg\"}))),mdx(\"tr\",null,mdx(\"th\",null,\"Close up of tach wire \u0026 pot\"),mdx(\"th\",null,\"Fan at full speed blowing paper card\")),mdx(\"tr\",null,mdx(\"th\",{colSpan:\"2\"},\"Link to YouTube Video: \",mdx(\"a\",{href:\"https://youtu.be/PMThd7WUhio\"},\"https://youtu.be/PMThd7WUhio\")))),mdx(\"h2\",null,\"Code\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-avrasm\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"; DCfan.asm\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"; Created: 2018-04-11 1:39:45 PM\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"; Author : Ethan McAuliffe\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),'#include \"prescalers.h\"'),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define F_CPU 16000000; cpu freq 16 Mhz\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define PRESCALE 8\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define F_FAN 25000\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define FREQ F_CPU/PRESCALE/F_FAN; (OCR2A) = 80\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define DUTY 40; start with a 40% duty cycle\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define BAUDRATE 103;9600 baud\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define newLine 13;\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\"#define offset 'A';\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" duty         =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r19\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" pulseCount   =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r20\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" rps          =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r21\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" txByte       =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r22\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" empirical    =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r23\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" setPoint     =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r24\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".def\"),\" difference   =\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r25\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0000\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` reset\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0014\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` TIM1_CAPT\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x001A\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` TIM1_OVF\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0020\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` TIM0_OVF\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x002A\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` ADC_Complete\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0050\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"RPMStart:\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";.db    900,900,900,900,1200,2000,2700,3400,4050,4500,4800,0\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".db\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"30\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"40\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"66\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"90\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"113\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"135\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"150\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"160\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";rotations/second according to duty cycle from datasheet\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"RPMEnd:\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"Greeting:\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".db\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"Hello world! \"'),`,newLine //newLine terminated\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-meta\"}),\".org\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"0x0100\"),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"reset:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"cli\"),\"              \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\" RPMInit    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\" PWMInit    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\" ADCInit    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\" TM0Init    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";for adc\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\" TM1Init    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";for input capture\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\" UARTInit   \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   rcall display    ;prints greeting to terminal\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   rcall PIDInit    ;\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sei\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"wait:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` wait\n\n\n\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"UARTInit:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",BAUDRATE\u003e\u003e\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"UBRR0H\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`,BAUDRATE\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"UBRR0L\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cTXEN0)     \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";RXEN0 for receive\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"UCSR0B\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cUCSZ01) | (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`\u003c\u003cUCSZ00)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"UCSR0C\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"display:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xl\"),\",low(Greeting\u003c\u003c\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xh\"),\",high(Greeting\u003c\u003c\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"movw\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"x\"),`\n    nextChar:\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lpm\"),\"   txByte,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),`+\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),` transmit\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"cpi\"),`   txByte,newLine\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"brne\"),`  nextChar\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"transmit:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lds\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"UCSR0A\"),\"         \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";read control status register 'A'\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sbrs\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`,UDRE0\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rjmp\"),` transmit\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"UDR0\"),`,txByte\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"ADCInit:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ser\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  DIDR0,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";disable pins to reduce power consumption\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cREFS0)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADLAR)  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"ADMUX\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";Enable, start dummy conversion, enable timer as trigger, , prescaler...\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADEN)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADSC)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADATE)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADIE)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADPS2)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADPS1)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADPS0)\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  ADCSRA,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cADTS2)         \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  ADCSRB,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                 \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"dummy:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";first read is not accurate - start conversion, check for data, throw away\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lds\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",ADCSRA \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";load ADCSRA register to check dummy flag\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"andi\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`\u003c\u003cADIF\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"breq\"),` dummy\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"RPMInit:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xl\"),\",low(RPMStart \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\")  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";actually rotations/second as they are smaller and fit in a single byte\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"xh\"),\",low(RPMStart \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"yl\"),\",low(RPMEnd \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"yh\"),\",low(RPMEnd \u003c\u003c \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"movw\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"x\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"PWMInit:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),` \u003c\u003c PORTD3)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"DDRD\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\" \u003c\u003c COM2B1) | (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\" \u003c\u003c WGM21) | (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\" \u003c\u003c WGM20) \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"; OC2A disconnected, OC2B connected, MODE 7 (OCR2A as TOP)\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  TCCR2A,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\" \u003c\u003c WGM22) | (\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\" \u003c\u003c T2ps8) \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"; complete WGM definition and prescaler\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  TCCR2B,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`,FREQ\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  OCR2A,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`,DUTY\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  OCR2B,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"TM1Init:\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   clr   r16       ;alternatives to clear a register\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   ldi   r16,0\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   andi  r16,0\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"eor\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"TCCR1A\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(T1ps256)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cICES1) \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";input capture rising edge, prescale 256 (2^24)/(2^16)/(2^8)=1/s\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"TCCR1B\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cICIE1)|(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),\"\u003c\u003cTOIE1)\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";enable input capture and enable timer interrupt overflow enable\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  TIMSK1,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),`  pulseCount\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"TM0Init:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";this timer is responsible for telling the ADC to read the value of the potentiometer\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\"  TCCR0A,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",T0ps1024   \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";2^24/2^10/2^8 = 2^6 = 64 ADC/sec\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"out\"),\"  TCCR0B,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`\u003c\u003cTOIE0)\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  TIMSK0,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ret\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"TIM0_OVF:\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"reti\"),\"                    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";required to have the ADIF cleared\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"ADC_Complete:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lds\"),\"  duty,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"ADCH\"),\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";load upper byte of adc value\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",FREQ       \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";set to 80\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"mul\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",duty       \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";multiply by duty\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sts\"),\"  OCR2B,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r1\"),\"       \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";r1 stores high byte of product (divide by 256)\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"reti\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"TIM1_CAPT:\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"inc\"),`  pulseCount\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"reti\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-symbol\"}),\"TIM1_OVF:\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   mov  rps,pulseCount ;get number of rotations/second (*2)\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   clr  pulseCount     ;clear immediately to record every pulse\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";   lsr  rps\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"mov\"),\"  empirical,pulseCount\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";[30-160] rps\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"clr\"),\"  pulseCount         \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"ldi\"),\"  difference,offset  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"add\"),\"  difference,empirical\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"mov\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\",duty           \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";get duty value of [0-80]\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lsr\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lsr\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"                    \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";shift right thrice\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lsr\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"movw\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"x\"),\"                \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";zero index of RPS\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"add\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"zl\"),\",\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"r16\"),\"             \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";set index\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"lpm\"),\"  setPoint,\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"z\"),\"         \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"sub\"),`  difference,setPoint\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"mov\"),\"  txByte,difference  \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";place difference in the transmit register\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"rcall\"),\"  transmit         \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\";transmit the difference\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"reti\"),`\n`)),mdx(\"h2\",null,\"Reference\"),mdx(\"p\",null,\"D'Arcy, Chris. \\u201CAVR Assembly Tasks.\\u201D ACES, RSGC, 28 Mar. 2018, \",mdx(\"a\",a({parentName:\"p\"},{href:\"http://darcy.rsgc.on.ca/ACES/TEI4M/1718/AssemblyTasks.html\"}),\"http://darcy.rsgc.on.ca/ACES/TEI4M/1718/AssemblyTasks.html\"),\".\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}}},"__N_SSG":true},"page":"/blog/[postName]","query":{"postName":"2018-05-21-DC-Fan-Project"},"buildId":"UTwJR9V20MoZaEMa3ghX8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>